<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Work World - Practical skills for real-world income</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.49.1/dist/umd/supabase.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <style>
        /* Define custom gold color and bold font for a high-status look */
        :root {
            --color-gold: #FFD700;
        }
        .text-gold { color: var(--color-gold); }
        .bg-gold { background-color: var(--color-gold); }
        .border-gold { border-color: var(--color-gold); }
        
        /* Apply Inter font and deep black background globally */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #000000;
            color: #ffffff;
            min-height: 100vh;
        }

        /* Utility for bold, striking headlines */
        .headline-font {
            font-weight: 900; /* Extra Black */
            letter-spacing: -1px;
        }

        /* Custom scrollbar to match the theme (for modern browsers) */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-thumb {
            background-color: var(--color-gold);
            border-radius: 4px;
        }
        ::-webkit-scrollbar-track {
            background-color: #1a1a1a;
        }

        /* Simple animation for buttons */
        .btn-hover-gold:hover {
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.7);
            transform: translateY(-2px);
        }

        /* Style for the active lesson button */
        .lesson-btn.active {
            background-color: var(--color-gold);
            color: #000000;
            font-weight: bold;
        }
    
  /* Footer */
  .footer { border-top: 1px solid rgba(255,255,255,0.08); padding: 18px 0; margin-top: 28px; }
  .footer-inner { max-width: 1100px; margin: 0 auto; padding: 0 18px; display:flex; gap:16px; align-items:flex-start; justify-content:space-between; flex-wrap:wrap; }
  .footer-left { max-width: 680px; }
  .footer-brand { font-weight: 700; letter-spacing: 0.2px; }
  .footer-sub { opacity: 0.8; font-size: 12.5px; margin-top: 6px; line-height: 1.35; }
  .footer-links { display:flex; gap:14px; flex-wrap:wrap; }
  .footer-links a { font-size: 13px; opacity: 0.9; text-decoration:none; }
  .footer-links a:hover { text-decoration: underline; }
</style>
</head>
<body class="bg-black text-white antialiased">

    <div id="app" class="flex flex-col min-h-screen">
            <div class="p-6 max-w-3xl mx-auto">
                <h1 class="text-3xl font-extrabold tracking-tight">The Work World</h1>
                <p class="mt-3 text-white/80">Loading… If this stays blank, your browser blocked a required script. See the message below.</p>
                <div id="bootError" class="hidden mt-4 p-4 rounded-xl border border-red-500/40 bg-red-500/10 text-red-100"></div>
            </div>
        </div>
    <noscript>
      <div style="padding:16px;max-width:720px;margin:0 auto;color:white;">
        JavaScript is required to run this site. Please enable JavaScript and reload.
      </div>
    </noscript>

    <script>

        // Global State Management (Simulated Routing & Payment)
        let ROUTE_FROM_HASH = false;

        const STATE = {
            mobileMenuOpen: false,
            cookieConsent: null,
            currentPage: 'home', // 'login', 'home', 'courses', 'lesson', 'account', 'terms', 'privacy', 'refund', 'cookies', 'disclaimer'
            // Access is controlled server-side via entitlements (paid purchases).
            entitlements: {}, // { [courseId]: true }
            lessonCache: {}, // { [courseId]: { [lessonId]: htmlString } }

            selectedCourse: null, // Stores the ID of the course being viewed
            currentLesson: 'lesson1', // Stores the ID of the current lesson (lesson1, lesson2, etc.)
            user: null, // Supabase user object when logged in
            postLoginRedirect: null // { page, courseId, lessonId }
        };
// ----------------- Navigation helpers (hash-based) -----------------
// We use hash routing so GitHub Pages works without refresh.
function buildHash(page, courseId = null, lessonId = null) {
    const p = (page || 'home').toString();
    if (p === 'lesson') {
        const c = encodeURIComponent(courseId || STATE.selectedCourse || '');
        const l = encodeURIComponent(lessonId || STATE.currentLesson || 'lesson1');
        return `#lesson?course=${c}&lesson=${l}`;
    }
    return `#${p}`;
}

function navigateTo(page, courseId = null, lessonId = null, fromHash = false) {
    const p = (page || 'home').toString();
    STATE.currentPage = p;
    if (courseId) STATE.selectedCourse = courseId;
    if (lessonId) STATE.currentLesson = lessonId;

    // Update the URL hash unless we are already responding to a hash route.
    const newHash = buildHash(p, courseId, lessonId);
    if (!fromHash) {
        if (window.location.hash !== newHash) {
            window.location.hash = newHash;
            // renderApp will run on hashchange; avoid double-render here.
            return;
        }
    }

    // Render immediately (used for hashchange handling).
    try {
        renderApp();
    } catch (e) {
        console.error(e);
        throw e;
    }
}

function updateLesson(lessonId) {
    const l = (lessonId || 'lesson1').toString();
    navigateTo('lesson', STATE.selectedCourse, l);
}

function updateTrack(trackId) {
    // Track finder uses this to jump to a recommended course.
    const courseId = (trackId || '').toString();
    if (courseId) navigateTo('lesson', courseId, 'lesson1');
}



// --- Cookie / local storage consent banner ---
const COOKIE_CONSENT_KEY = 'wwu_cookie_consent_v1';

function getCookieConsent() {
    try { return localStorage.getItem(COOKIE_CONSENT_KEY); } catch (e) { return null; }
}
function setCookieConsent(value) {
    try { localStorage.setItem(COOKIE_CONSENT_KEY, value); } catch (e) {}
    STATE.cookieConsent = value;
}
function acceptCookies() {
    setCookieConsent('accepted');
    showMessage('Cookies accepted. Thanks!', 'success');
    renderApp();
}
function declineCookies() {
    // We only use essential storage for authentication + preferences; declining non-essential cookies means we won't enable optional analytics.
    setCookieConsent('declined');
    showMessage('Non-essential cookies declined.', 'info');
    renderApp();
}
function renderCookieBanner() {
    const consent = STATE.cookieConsent || getCookieConsent();
    if (consent) return '';
    return `
        <div class="fixed inset-0 z-[9998] bg-black/70"></div>
        <div class="fixed bottom-0 left-0 right-0 z-[9999] border-t border-gold/50 bg-[#0b0b0b]">
            <div class="container mx-auto px-4 py-5 max-w-7xl flex flex-col md:flex-row gap-4 md:items-center md:justify-between">
                <div class="text-sm text-gray-200 leading-relaxed">
                    <div class="text-gold font-semibold uppercase tracking-widest text-xs mb-1">Cookies & Privacy</div>
                    <div>
                        We use cookies and similar technologies (like local storage) to run this site, keep you logged in, and remember preferences.
                        Optional analytics may be enabled only if you consent. Read our
                        <a href="#cookies" class="text-gold hover:underline" data-nav="cookies">Cookie Policy</a>
                        and
                        <a href="#privacy" class="text-gold hover:underline" data-nav="privacy">Privacy Policy</a>.
                    </div>
                </div>
                <div class="flex flex-col sm:flex-row gap-2 sm:items-center">
                    <button data-cookie-action="decline" class="px-5 py-2 rounded-md border border-zinc-700 text-gray-200 hover:bg-zinc-900 transition text-sm">
                        Decline Non‑Essential
                    </button>
                    <button data-cookie-action="accept" class="px-6 py-2 rounded-md bg-gold text-black font-bold uppercase tracking-wider hover:opacity-90 transition text-sm">
                        Accept Cookies
                    </button>
                </div>
            </div>
        </div>
    `;
}


        
        
// --- Ownership tracking (prototype) ---
const OWNED_KEYS = {
    ownedByUserId: 'wwu_owned_courses_by_user_id_v1'
};

function getOwnedCoursesForCurrentUser() {
    try {
        const map = JSON.parse(localStorage.getItem(OWNED_KEYS.ownedByUserId) || '{}') || {};
        const uid = STATE.user?.id || null;
        if (!uid) return [];
        return Array.isArray(map[uid]) ? map[uid] : [];
    } catch {
        return [];
    }
}

function setOwnedCoursesForCurrentUser(courseIds) {
    try {
        const map = JSON.parse(localStorage.getItem(OWNED_KEYS.ownedByUserId) || '{}') || {};
        const uid = STATE.user?.id || null;
        if (!uid) return;
        map[uid] = Array.from(new Set(courseIds || []));
        localStorage.setItem(OWNED_KEYS.ownedByUserId, JSON.stringify(map));
    } catch {}

}


// --- Ownership + Access Helpers ---
function isCourseOwned(courseId) {
    if (!courseId) return false;
    if (!STATE.user) return false;
    return getOwnedCoursesForCurrentUser().includes(courseId);
}

function markCourseOwned(courseId) {
    if (!STATE.user || !courseId) return false;
    const owned = Object.keys(STATE.entitlements || {});
    if (!owned.includes(courseId)) {
        owned.push(courseId);
        setOwnedCoursesForCurrentUser(owned);
    }
    STATE.isPaid = isCourseOwned(courseId);
    return true;
}

function refreshPaidStatus(courseId) {
    STATE.isPaid = isCourseOwned(courseId);
}

// --- Secure Auth (Supabase Email/Password) ---
// Your Supabase URL + anon key are safe to embed on the frontend.
const SUPABASE_URL = "https://aqnazumvqiygqpaaoolg.supabase.co";
const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFxbmF6dW12cWl5Z3FwYWFvb2xnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAxNDQ2NjUsImV4cCI6MjA4NTcyMDY2NX0.VeVaBGoqhTic1j_-9fkniuUqCXs8hi60_gVTxlBRaK0";

const supabaseClient = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

function escapeHtml(str = '') {
    return String(str)
        .replaceAll('&', '&amp;')
        .replaceAll('<', '&lt;')
        .replaceAll('>', '&gt;')
        .replaceAll('"', '&quot;')
        .replaceAll("'", '&#039;');
}

// --- Simple modal helper (no external deps) ---
function openModal(html) {
    closeModal();
    const wrap = document.createElement('div');
    wrap.id = 'ww_modal';
    wrap.className = 'fixed inset-0 z-[9999] flex items-center justify-center bg-black/70 p-4';
    wrap.innerHTML = `
        <div class="w-full max-w-xl bg-[#0b0b0b] border border-gold/40 rounded-2xl shadow-2xl">
            <div class="p-5 border-b border-gold/20 flex items-center justify-between">
                <div class="text-white font-extrabold uppercase tracking-wider text-sm">The Work World</div>
                <button type="button" data-action="modal-close" class="text-gold text-sm font-bold px-3 py-1 rounded hover:bg-[#111]">Close</button>
            </div>
            <div class="p-6">${html}</div>
        </div>
    `;
    document.body.appendChild(wrap);
}
function closeModal() {
    const el = document.getElementById('ww_modal');
    if (el) el.remove();
}

// --- Gumroad (ready for later) ---
// Add your Gumroad product URLs when you're ready.
// Example: GUMROAD_PRODUCTS.landscaping.url = "https://gumroad.com/l/XXXX";
const GUMROAD_PRODUCTS = {
    landscaping: { name: "Landscaping & Running a Landscaping Business", url: "" },
    trading: { name: "Stock Market & Cryptocurrency Trading", url: "" },
    ai: { name: "Making AI Work for You", url: "" },
    sales: { name: "Selling Anything to Anyone", url: "" },
};

// Optional: Edge Function name for verifying Gumroad purchases (server-side).
// You'll create this later when Gumroad is live.
const GUMROAD_VERIFY_FUNCTION = "verify-gumroad";

function openPaywallModal(courseId, lessonId) {
    const course = COURSES.find(c => c.id === courseId);
    const prod = GUMROAD_PRODUCTS[courseId] || { name: course?.title || "Course", url: "" };

    const buyBlock = prod.url
        ? `<a href="${prod.url}" target="_blank" rel="noopener"
              class="inline-flex items-center justify-center w-full px-6 py-3 bg-gold text-black font-extrabold uppercase rounded-md btn-hover-gold">
              Buy on Gumroad
           </a>
           <p class="text-xs text-gray-500 mt-2">After purchase, you'll verify access here and lessons will unlock on this account.</p>`
        : `<div class="p-4 bg-black rounded-lg border border-gold/20">
              <p class="text-white font-bold">Purchases coming soon</p>
              <p class="text-gray-300 text-sm mt-1">When your Gumroad products are ready, we'll add the links here and turn on verification.</p>
           </div>`;

    const html = `
        <h3 class="text-2xl text-white headline-font mb-2">Unlock: ${escapeHtml(prod.name)}</h3>
        <p class="text-gray-300 mb-6">Lessons are delivered securely from Supabase and only unlock for paid users.</p>
        ${buyBlock}
        <div class="mt-6 pt-6 border-t border-gold/20">
            <p class="text-white font-bold mb-2">Already purchased?</p>
            <p class="text-gray-300 text-sm mb-3">Once verification is enabled, paste your Gumroad license key to restore access.</p>
            <input id="gumroadLicenseKey" class="w-full px-4 py-3 rounded-lg bg-black border border-gold/30 text-white" placeholder="Gumroad license key (coming soon)" />
            <button type="button" data-action="verify-license" data-course="${courseId}" data-lesson="${lessonId || 'lesson1'}"
                class="mt-3 w-full px-6 py-3 bg-black text-gold font-extrabold uppercase rounded-md border border-gold/40 hover:bg-[#111] transition">
                Verify & Restore (coming soon)
            </button>
            <p class="text-xs text-gray-500 mt-3">Until Gumroad is live, you can manually grant access by inserting a row in the Supabase <span class="text-gold">entitlements</span> table for your user.</p>
        </div>
    `;
    openModal(html);
}

async function createAccount(email, password) {
    const e = String(email || '').trim().toLowerCase();
    if (!e) throw new Error('Please enter an email.');
    if (!password || String(password).length < 6) throw new Error('Password must be at least 6 characters.');

    const redirectTo = window.location.origin + window.location.pathname;
    const { data, error } = await supabaseClient.auth.signUp({
        email: e,
        password: String(password),
        options: { emailRedirectTo: redirectTo }
    });
    if (error) throw error;

    // Some projects require email confirmation; treat both cases gracefully.
    if (!data?.user) throw new Error('Sign up started. Please check your email to confirm your account.');
    return data.user;
}

async function signIn(email, password) {
    const e = String(email || '').trim().toLowerCase();
    if (!e) throw new Error('Please enter an email.');
    if (!password) throw new Error('Please enter your password.');

    const { data, error } = await supabaseClient.auth.signInWithPassword({
        email: e,
        password: String(password)
    });
    if (error) throw error;
    return data.user;
}

async function signOut() {
    await supabaseClient.auth.signOut();
    STATE.user = null;
    STATE.postLoginRedirect = null;
    navigateTo('login');
}

async function loadAuthOnStartup() {
    // Restore session and keep STATE.user in sync.
    const { data } = await supabaseClient.auth.getSession();
    STATE.user = data?.session?.user || null;
    await refreshEntitlements();

    supabaseClient.auth.onAuthStateChange((_event, session) => {
        STATE.user = session?.user || null;
        refreshEntitlements();

        // If user signs out, keep the rest of the site intact but require login for account + lessons.
        if (!STATE.user && (STATE.currentPage === 'account' || STATE.currentPage === 'lesson')) {
            STATE.currentPage = 'login';
        }

        renderApp();
    });
}

        const COURSES = [
            { id: 'business_setup', title: "Business Setup Masterclass", professor: 'Frankie', bio: "Operator-first.", price: 50, shortDesc: "Set up a real business correctly: structure, banking, policies, contracts, and systems that protect cash flow and trust." },
            { id: 'sales', title: "Selling Anything to Anyone", professor: 'Frankie', bio: "Operator-first.", price: 50, shortDesc: "Master prospecting, discovery, objections, closing, and retention with repeatable scripts and a daily routine." },
            { id: 'ai', title: "Making AI Work for You", professor: 'Frankie', bio: "Operator-first.", price: 50, shortDesc: "Use AI to ship assets faster: prompts, workflows, automation thinking, and safe decision support." },
            { id: 'trading', title: "Stock Market & Cryptocurrency Trading (Education Only)", professor: 'Frankie', bio: "Operator-first.", price: 50, shortDesc: "Build a disciplined trading education system: risk management, routines, testing, and psychology." },
            { id: 'landscaping', title: "Landscaping & Running a Landscaping Business", professor: 'Frankie', bio: "Operator-first.", price: 50, shortDesc: "Scale a landscaping service with systems for scheduling, pricing, client acquisition, and hiring." },
            { id: 'pressure_washing', title: "Pressure Washing Business", professor: 'Frankie', bio: "Operator-first.", price: 50, shortDesc: "Get customers fast, deliver clean jobs safely, and scale with SOPs, pricing rules, and reviews." },
            { id: 'content_agency', title: "Content Agency Path", professor: 'Frankie', bio: "Operator-first.", price: 50, shortDesc: "Build a content agency: outreach, sales, onboarding, production workflow, approvals, reporting, and scale." },
        ];

        // Short, plain-language badges used in course preview cards
        const COURSE_BADGES = {
            landscaping: 'LANDSCAPING',
            trading: 'TRADING',
            ai: 'AI',
            sales: 'SALES',
        };


        

        // Startup cost guidance (display only; real costs vary by region and equipment quality)
        function getStartupCostDisplay(courseId) {
            const map = {
                landscaping: '$1,000 (lean) to $20,000 (truck + trailer + commercial setup)',
                trading: '$1,000',
                ai: '$100',
                sales: '$500',
            };
            return map[courseId] || 'Varies';
        }

// --- FULL LESSON CONTENT STRUCTURE ---
        
        // --- LESSON CONTENT DELIVERY (SECURE) ---
// Full lesson HTML is NOT shipped in this public website.
// Lessons are stored server-side in Supabase and delivered only to entitled (paid) users via an Edge Function.
// This prevents “View Source” leaks of your full curriculum.

const LESSON_PREVIEWS = {
  business_setup: {
    lesson1: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Choose Your Business Type</h2>
<p class="mb-5 leading-relaxed text-gray-300">Pick the right structure (sole prop/LLC/etc.) and understand the tradeoffs.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson2: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">EIN, Bank Account, and Clean Money</h2>
<p class="mb-5 leading-relaxed text-gray-300">Separate business and personal money so records stay clean and auditable.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson3: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Taxes You Must Understand</h2>
<p class="mb-5 leading-relaxed text-gray-300">Understand basics (income, self-employment, sales tax where applicable) and compliance habits.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson4: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Bookkeeping Setup That Doesn’t Suck</h2>
<p class="mb-5 leading-relaxed text-gray-300">A simple weekly system to track income, expenses, and profit.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson5: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Insurance Basics</h2>
<p class="mb-5 leading-relaxed text-gray-300">What coverage is for and how it protects you from one bad day.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson6: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Permits & Licenses Master Checklist</h2>
<p class="mb-5 leading-relaxed text-gray-300">Build a checklist and learn how to verify requirements locally.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson7: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">How to Call Your City + Ask the Right Questions</h2>
<p class="mb-5 leading-relaxed text-gray-300">Call the right departments and document answers correctly.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson8: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Contracts: Your #1 Legal Shield</h2>
<p class="mb-5 leading-relaxed text-gray-300">Use scope, approvals, and payment terms to prevent disputes.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson9: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Policies That Prevent Chargebacks</h2>
<p class="mb-5 leading-relaxed text-gray-300">Refund/cancellation policies that reduce misunderstandings and disputes.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson10: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Hiring Basics (Without Getting Cooked)</h2>
<p class="mb-5 leading-relaxed text-gray-300">Onboarding, classification basics, and accountability.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson11: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Customer Communication SOP</h2>
<p class="mb-5 leading-relaxed text-gray-300">Standard communication templates that build trust and reduce chaos.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson12: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Pricing Fundamentals</h2>
<p class="mb-5 leading-relaxed text-gray-300">Price for time, costs, margin, and risk—no guessing.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson13: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Risk Management</h2>
<p class="mb-5 leading-relaxed text-gray-300">Documentation, safety, and dispute prevention systems.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson14: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Scaling Without Chaos</h2>
<p class="mb-5 leading-relaxed text-gray-300">SOPs, checklists, and roles that let you grow.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson15: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Your Launch Checklist</h2>
<p class="mb-5 leading-relaxed text-gray-300">A final checklist from idea to operating business systems.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`
  },
  sales: {
    lesson1: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Sales Fundamentals (Mindset + Process)</h2>
<p class="mb-5 leading-relaxed text-gray-300">Build a repeatable sales system: pipeline, qualification, and follow-up.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson2: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Offer Clarity (Sell Outcomes, Not Features)</h2>
<p class="mb-5 leading-relaxed text-gray-300">Make your offer simple, specific, and easy to buy.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson3: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Lead Sources (Pick 2 and Dominate)</h2>
<p class="mb-5 leading-relaxed text-gray-300">Choose two channels and run them daily with tracking.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson4: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Outbound Scripts (DM/Email/Call)</h2>
<p class="mb-5 leading-relaxed text-gray-300">Short scripts that get replies and set appointments.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson5: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Discovery Call Structure</h2>
<p class="mb-5 leading-relaxed text-gray-300">Ask questions that uncover pain, urgency, and fit.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson6: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Pitch Framework (Problem → Plan → Proof → Price)</h2>
<p class="mb-5 leading-relaxed text-gray-300">Explain the plan clearly, anchor value, and close the next step.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson7: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Objection Handling (The Big 6)</h2>
<p class="mb-5 leading-relaxed text-gray-300">Handle price, timing, trust, spouse/partner, “send info,” and “busy.”</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson8: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Closing Clean (Not Slimy)</h2>
<p class="mb-5 leading-relaxed text-gray-300">Close with clarity: options, deposits, deadlines, next steps.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson9: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Follow-Up System (7–14 Days)</h2>
<p class="mb-5 leading-relaxed text-gray-300">A follow-up sequence that closes deals without begging.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson10: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Negotiation + Pricing Power</h2>
<p class="mb-5 leading-relaxed text-gray-300">Protect margin: if price drops, scope drops.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson11: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Sales Ops (CRM + Tracking)</h2>
<p class="mb-5 leading-relaxed text-gray-300">Track stages, conversion rates, and what to fix.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson12: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Appointment Setting</h2>
<p class="mb-5 leading-relaxed text-gray-300">Book calls fast and reduce no-shows.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson13: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Retention + Referrals</h2>
<p class="mb-5 leading-relaxed text-gray-300">Keep clients longer and ask for referrals the right way.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson14: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Hiring Sales Reps (When Ready)</h2>
<p class="mb-5 leading-relaxed text-gray-300">Hire, train, and review calls so reps don’t freestyle.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson15: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Operator Sales Playbook (Final)</h2>
<p class="mb-5 leading-relaxed text-gray-300">Your daily/weekly routine and scorecard.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`
  },
  ai: {
    lesson1: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">AI Fundamentals (What It Can/Can’t Do)</h2>
<p class="mb-5 leading-relaxed text-gray-300">Use AI as a tool, understand limitations, and verify outputs.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson2: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Prompting That Produces Results</h2>
<p class="mb-5 leading-relaxed text-gray-300">Constraints, examples, formatting, and reusable templates.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson3: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">AI Research + Decision Support</h2>
<p class="mb-5 leading-relaxed text-gray-300">Summarize and compare — then verify with sources and checks.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson4: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">AI for Writing That Converts</h2>
<p class="mb-5 leading-relaxed text-gray-300">Offers, landing pages, emails, and scripts that sound strong and clear.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson5: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">AI for Sales Roleplay + Objections</h2>
<p class="mb-5 leading-relaxed text-gray-300">Practice objections and refine scripts with AI.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson6: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">AI Content System (30 posts/week)</h2>
<p class="mb-5 leading-relaxed text-gray-300">Batch hooks, scripts, captions, and repurposing workflows.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson7: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">AI Editing + Repurposing</h2>
<p class="mb-5 leading-relaxed text-gray-300">Long-to-short workflows with quality standards.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson8: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Automation Thinking (Triggers → Actions)</h2>
<p class="mb-5 leading-relaxed text-gray-300">Map workflows, handle errors, and build safe automations.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson9: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">AI Receptionist / Intake</h2>
<p class="mb-5 leading-relaxed text-gray-300">Automate intake questions and routing with human escalation.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson10: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">AI Support Desk</h2>
<p class="mb-5 leading-relaxed text-gray-300">Macros, FAQs, and escalation rules.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson11: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">AI for Operations (SOPs + Training)</h2>
<p class="mb-5 leading-relaxed text-gray-300">Turn chaos into SOPs, onboarding, and repeatable processes.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson12: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">AI for Data + Spreadsheets</h2>
<p class="mb-5 leading-relaxed text-gray-300">Track KPIs and build dashboards.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson13: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">AI for Local Business Growth</h2>
<p class="mb-5 leading-relaxed text-gray-300">GBP posts, review replies, ads copy, and lead-driving content.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson14: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">AI Risks + Legal/Privacy Basics</h2>
<p class="mb-5 leading-relaxed text-gray-300">Protect data, avoid copyright issues, and use consent.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson15: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Build Your AI Stack (Final)</h2>
<p class="mb-5 leading-relaxed text-gray-300">Pick tools, routines, and 3 automations that save real time.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`
  },
  trading: {
    lesson1: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Trading Reality Check (Operator vs Gambler)</h2>
<p class="mb-5 leading-relaxed text-gray-300">Define rules, expectations, and why most people lose.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson2: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Market Basics (What Moves Price)</h2>
<p class="mb-5 leading-relaxed text-gray-300">Liquidity, volatility, spreads, and market structure basics.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson3: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Platform Setup + Journaling</h2>
<p class="mb-5 leading-relaxed text-gray-300">Paper trade, build your journal, and define what you track.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson4: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Risk Management (Position Sizing + Stops)</h2>
<p class="mb-5 leading-relaxed text-gray-300">Define R, max loss rules, and sizing to survive.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson5: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Price Action Foundations</h2>
<p class="mb-5 leading-relaxed text-gray-300">Trends, ranges, levels, invalidation, and clean decision-making.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson6: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Your First Strategy (One Setup Only)</h2>
<p class="mb-5 leading-relaxed text-gray-300">Pick one setup with exact entry/exit rules.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson7: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Backtesting + Forward Testing</h2>
<p class="mb-5 leading-relaxed text-gray-300">Test honestly, avoid curve-fit, track sample size.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson8: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Execution SOP (Before/During/After)</h2>
<p class="mb-5 leading-relaxed text-gray-300">Routines that remove emotion from decisions.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson9: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Psychology Under Pressure</h2>
<p class="mb-5 leading-relaxed text-gray-300">Reset protocols for FOMO, revenge, and streaks.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson10: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Options & Leverage (If Used)</h2>
<p class="mb-5 leading-relaxed text-gray-300">Understand leverage risk and avoid blowing up.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson11: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">News + Event Risk</h2>
<p class="mb-5 leading-relaxed text-gray-300">Know when to stand aside.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson12: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Building a Trade Watchlist</h2>
<p class="mb-5 leading-relaxed text-gray-300">Scan criteria and daily routine.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson13: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Metrics That Matter</h2>
<p class="mb-5 leading-relaxed text-gray-300">Expectancy, drawdown, and rule adherence.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson14: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Common Failure Points</h2>
<p class="mb-5 leading-relaxed text-gray-300">Strategy hopping, oversizing, no journal, exceptions.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson15: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Operator Trading Plan (Final)</h2>
<p class="mb-5 leading-relaxed text-gray-300">Write a complete plan with scaling rules and audits.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`
  },
  landscaping: {
    lesson1: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Landscaping Business Overview (What to Sell First)</h2>
<p class="mb-5 leading-relaxed text-gray-300">Choose a profitable service menu and standards.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson2: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Tools & Truck Setup (Budget → Pro)</h2>
<p class="mb-5 leading-relaxed text-gray-300">Lean setup, safety, maintenance, and upgrade path.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson3: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Pricing Like a Pro</h2>
<p class="mb-5 leading-relaxed text-gray-300">Quote with margin, time, travel, materials, and risk.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson4: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Sales Script + Closing</h2>
<p class="mb-5 leading-relaxed text-gray-300">Book jobs fast and handle common objections.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson5: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Customer Acquisition: The Fast 3</h2>
<p class="mb-5 leading-relaxed text-gray-300">Neighbors, referrals, local listings.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson6: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Google Business Profile (Local SEO Basics)</h2>
<p class="mb-5 leading-relaxed text-gray-300">Local visibility, reviews, posting.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson7: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Service Quality SOP</h2>
<p class="mb-5 leading-relaxed text-gray-300">Consistent delivery with checklists and QA.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson8: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Scheduling & Route Optimization</h2>
<p class="mb-5 leading-relaxed text-gray-300">Route density, stacking jobs, calendar control.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson9: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Upsells That Double Profit</h2>
<p class="mb-5 leading-relaxed text-gray-300">Add-ons and bundles without chaos.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson10: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Equipment Safety + Property Protection</h2>
<p class="mb-5 leading-relaxed text-gray-300">Damage prevention, photos, scope language.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson11: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Hiring Your First Helper</h2>
<p class="mb-5 leading-relaxed text-gray-300">Hire, train, and manage with accountability.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson12: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Crew Systems + SOPs</h2>
<p class="mb-5 leading-relaxed text-gray-300">Standard kits and daily reviews for scaling.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson13: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Commercial Jobs Introduction</h2>
<p class="mb-5 leading-relaxed text-gray-300">Walkthroughs, bids, invoicing terms.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson14: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Numbers That Matter</h2>
<p class="mb-5 leading-relaxed text-gray-300">Track the metrics that drive profit.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson15: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Scale Plan</h2>
<p class="mb-5 leading-relaxed text-gray-300">90-day scale plan: raise prices, systemize, hire.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`
  },
  pressure_washing: {
    lesson1: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Pressure Washing Business Overview</h2>
<p class="mb-5 leading-relaxed text-gray-300">What services to sell, who to sell to, and what to avoid.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson2: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Equipment Setup</h2>
<p class="mb-5 leading-relaxed text-gray-300">Build a reliable rig and understand what matters.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson3: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Chemicals, Mixes & Safety</h2>
<p class="mb-5 leading-relaxed text-gray-300">Safe chemical handling and surface basics.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson4: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Compliance & Water Rules</h2>
<p class="mb-5 leading-relaxed text-gray-300">Wastewater basics, local rules, and documentation.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson5: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Pricing & Quote System</h2>
<p class="mb-5 leading-relaxed text-gray-300">Pricing by surface, time, risk, and minimum charges.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson6: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Marketing: Before/After Content System</h2>
<p class="mb-5 leading-relaxed text-gray-300">Shoot content that sells and post consistently.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson7: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Lead Gen: Local Domination</h2>
<p class="mb-5 leading-relaxed text-gray-300">GBP, neighbors, flyers, referrals, partnerships.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson8: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Sales Script + Booking</h2>
<p class="mb-5 leading-relaxed text-gray-300">Book jobs, deposits, confirmations.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson9: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Job Workflow SOP</h2>
<p class="mb-5 leading-relaxed text-gray-300">Repeatable delivery from arrival to wrap-up.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson10: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Avoiding Damage</h2>
<p class="mb-5 leading-relaxed text-gray-300">Protect surfaces, prevent etching, avoid claims.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson11: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Reviews + Reputation</h2>
<p class="mb-5 leading-relaxed text-gray-300">Review request system and responses.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson12: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Upsells</h2>
<p class="mb-5 leading-relaxed text-gray-300">Add-ons that increase ticket size.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson13: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Commercial Accounts</h2>
<p class="mb-5 leading-relaxed text-gray-300">Recurring commercial work basics.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson14: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Hiring + Training</h2>
<p class="mb-5 leading-relaxed text-gray-300">Train techs with SOPs and quality control.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson15: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Scale Plan</h2>
<p class="mb-5 leading-relaxed text-gray-300">Expand routes, raise prices, add crews.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`
  },
  content_agency: {
    lesson1: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Agency Model Overview</h2>
<p class="mb-5 leading-relaxed text-gray-300">What to sell, who to target, and how you get paid.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson2: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Your Offer + Pricing</h2>
<p class="mb-5 leading-relaxed text-gray-300">Build a clear package and price it with margin.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson3: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Portfolio Fast</h2>
<p class="mb-5 leading-relaxed text-gray-300">Build proof fast without lying.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson4: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Outreach System</h2>
<p class="mb-5 leading-relaxed text-gray-300">Daily outbound system and lead tracking.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson5: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Scripts That Get Replies</h2>
<p class="mb-5 leading-relaxed text-gray-300">DM/email scripts and follow-up.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson6: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Sales Calls + Closing</h2>
<p class="mb-5 leading-relaxed text-gray-300">Discovery, pitch, close, deposits.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson7: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Onboarding SOP</h2>
<p class="mb-5 leading-relaxed text-gray-300">Scope, intake, access, expectations.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson8: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Production Workflow</h2>
<p class="mb-5 leading-relaxed text-gray-300">Pipeline, approvals, deadlines.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson9: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Creative that Performs</h2>
<p class="mb-5 leading-relaxed text-gray-300">Hooks, structure, retention, style guides.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson10: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Copywriting + Captions</h2>
<p class="mb-5 leading-relaxed text-gray-300">Captions that convert and match voice.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson11: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Reporting + Retention</h2>
<p class="mb-5 leading-relaxed text-gray-300">Monthly reporting and keeping clients.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson12: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Hiring Editors</h2>
<p class="mb-5 leading-relaxed text-gray-300">Hire and train editors/contractors.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson13: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Systems + SOP Library</h2>
<p class="mb-5 leading-relaxed text-gray-300">Build your operating system.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson14: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Legal + Compliance</h2>
<p class="mb-5 leading-relaxed text-gray-300">Contracts, rights, approvals, client data.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`,
    lesson15: `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Scale Plan</h2>
<p class="mb-5 leading-relaxed text-gray-300">Raise prices, add capacity, stabilize delivery.</p>
<div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/20">
  <p class="text-gold text-xs font-bold uppercase tracking-widest mb-3">What you’ll build</p>
  <ul class="space-y-2 text-gray-200">
    <li class="ml-5 list-disc">A repeatable SOP/checklist</li>
    <li class="ml-5 list-disc">A copy/paste template you can reuse</li>
    <li class="ml-5 list-disc">A metric to track weekly</li>
  </ul>
</div>
<p class="mt-6 text-gray-500 text-xs">Full lesson unlocks after purchase verification (Gumroad later) and is delivered securely from Supabase.</p>`
  }
};

const SECURE_LESSON_DEFAULT = `<h2 class="text-3xl sm:text-4xl text-gold headline-font mb-6">Lesson Locked</h2>
  <p class="mb-6 leading-relaxed">This lesson unlocks after purchase. If you already purchased, sign in and restore access.</p>`;

// Edge Function name that returns full lesson HTML for entitled users.
const LESSON_EDGE_FUNCTION = "get-lesson";

// Minimal lesson index for navigation (titles only). You can customize these later.
// Full content lives in Supabase (see setup instructions).
function buildLessonTitles(courseName) {
  const out = {};
  for (let i = 1; i <= 15; i++) out[`lesson${i}`] = `Lesson ${i}: ${courseName} — Module ${i}`;
  return out;
}

const LESSON_TITLES = {
  business_setup: {
    lesson1: "Choose Your Business Type",
    lesson2: "EIN, Bank Account, and Clean Money",
    lesson3: "Taxes You Must Understand",
    lesson4: "Bookkeeping Setup That Doesn’t Suck",
    lesson5: "Insurance Basics",
    lesson6: "Permits & Licenses Master Checklist",
    lesson7: "How to Call Your City + Ask the Right Questions",
    lesson8: "Contracts: Your #1 Legal Shield",
    lesson9: "Policies That Prevent Chargebacks",
    lesson10: "Hiring Basics (Without Getting Cooked)",
    lesson11: "Customer Communication SOP",
    lesson12: "Pricing Fundamentals",
    lesson13: "Risk Management",
    lesson14: "Scaling Without Chaos",
    lesson15: "Your Launch Checklist"
  },
  sales: {
    lesson1: "Sales Fundamentals (Mindset + Process)",
    lesson2: "Offer Clarity (Sell Outcomes, Not Features)",
    lesson3: "Lead Sources (Pick 2 and Dominate)",
    lesson4: "Outbound Scripts (DM/Email/Call)",
    lesson5: "Discovery Call Structure",
    lesson6: "Pitch Framework (Problem → Plan → Proof → Price)",
    lesson7: "Objection Handling (The Big 6)",
    lesson8: "Closing Clean (Not Slimy)",
    lesson9: "Follow-Up System (7–14 Days)",
    lesson10: "Negotiation + Pricing Power",
    lesson11: "Sales Ops (CRM + Tracking)",
    lesson12: "Appointment Setting",
    lesson13: "Retention + Referrals",
    lesson14: "Hiring Sales Reps (When Ready)",
    lesson15: "Operator Sales Playbook (Final)"
  },
  ai: {
    lesson1: "AI Fundamentals (What It Can/Can’t Do)",
    lesson2: "Prompting That Produces Results",
    lesson3: "AI Research + Decision Support",
    lesson4: "AI for Writing That Converts",
    lesson5: "AI for Sales Roleplay + Objections",
    lesson6: "AI Content System (30 posts/week)",
    lesson7: "AI Editing + Repurposing",
    lesson8: "Automation Thinking (Triggers → Actions)",
    lesson9: "AI Receptionist / Intake",
    lesson10: "AI Support Desk",
    lesson11: "AI for Operations (SOPs + Training)",
    lesson12: "AI for Data + Spreadsheets",
    lesson13: "AI for Local Business Growth",
    lesson14: "AI Risks + Legal/Privacy Basics",
    lesson15: "Build Your AI Stack (Final)"
  },
  trading: {
    lesson1: "Trading Reality Check (Operator vs Gambler)",
    lesson2: "Market Basics (What Moves Price)",
    lesson3: "Platform Setup + Journaling",
    lesson4: "Risk Management (Position Sizing + Stops)",
    lesson5: "Price Action Foundations",
    lesson6: "Your First Strategy (One Setup Only)",
    lesson7: "Backtesting + Forward Testing",
    lesson8: "Execution SOP (Before/During/After)",
    lesson9: "Psychology Under Pressure",
    lesson10: "Options & Leverage (If Used)",
    lesson11: "News + Event Risk",
    lesson12: "Building a Trade Watchlist",
    lesson13: "Metrics That Matter",
    lesson14: "Common Failure Points",
    lesson15: "Operator Trading Plan (Final)"
  },
  landscaping: {
    lesson1: "Landscaping Business Overview (What to Sell First)",
    lesson2: "Tools & Truck Setup (Budget → Pro)",
    lesson3: "Pricing Like a Pro",
    lesson4: "Sales Script + Closing",
    lesson5: "Customer Acquisition: The Fast 3",
    lesson6: "Google Business Profile (Local SEO Basics)",
    lesson7: "Service Quality SOP",
    lesson8: "Scheduling & Route Optimization",
    lesson9: "Upsells That Double Profit",
    lesson10: "Equipment Safety + Property Protection",
    lesson11: "Hiring Your First Helper",
    lesson12: "Crew Systems + SOPs",
    lesson13: "Commercial Jobs Introduction",
    lesson14: "Numbers That Matter",
    lesson15: "Scale Plan"
  },
  pressure_washing: {
    lesson1: "Pressure Washing Business Overview",
    lesson2: "Equipment Setup",
    lesson3: "Chemicals, Mixes & Safety",
    lesson4: "Compliance & Water Rules",
    lesson5: "Pricing & Quote System",
    lesson6: "Marketing: Before/After Content System",
    lesson7: "Lead Gen: Local Domination",
    lesson8: "Sales Script + Booking",
    lesson9: "Job Workflow SOP",
    lesson10: "Avoiding Damage",
    lesson11: "Reviews + Reputation",
    lesson12: "Upsells",
    lesson13: "Commercial Accounts",
    lesson14: "Hiring + Training",
    lesson15: "Scale Plan"
  },
  content_agency: {
    lesson1: "Agency Model Overview",
    lesson2: "Your Offer + Pricing",
    lesson3: "Portfolio Fast",
    lesson4: "Outreach System",
    lesson5: "Scripts That Get Replies",
    lesson6: "Sales Calls + Closing",
    lesson7: "Onboarding SOP",
    lesson8: "Production Workflow",
    lesson9: "Creative that Performs",
    lesson10: "Copywriting + Captions",
    lesson11: "Reporting + Retention",
    lesson12: "Hiring Editors",
    lesson13: "Systems + SOP Library",
    lesson14: "Legal + Compliance",
    lesson15: "Scale Plan"
  }
};

// Returns true only if the current logged-in user is entitled to this course.
function hasEntitlement(courseId) {
  return !!STATE.user && !!STATE.entitlements && !!STATE.entitlements[courseId];
}

// Pull entitlements from Supabase table: entitlements(user_id, course_id, status)
async function refreshEntitlements() {
  if (!STATE.user) {
    STATE.entitlements = {};
    return;
  }
  try {
    const { data, error } = await supabaseClient
      .from("entitlements")
      .select("course_id,status")
      .eq("user_id", STATE.user.id);

    if (error) throw error;
    const map = {};
    (data || []).forEach((row) => {
      if (row?.course_id && String(row.status || "active").toLowerCase() !== "revoked") {
        map[row.course_id] = true;
      }
    });
    STATE.entitlements = map;
  } catch (e) {
    // Fail closed: no entitlements loaded means locked lessons.
    STATE.entitlements = {};
    console.warn("Entitlements load failed:", e?.message || e);
  }
}

// Fetch the full lesson HTML from Supabase Edge Function (only works if entitled).
async function fetchFullLessonHtml(courseId, lessonId) {
  if (!courseId || !lessonId) throw new Error("Missing lesson reference.");

  // Cache
  STATE.lessonCache[courseId] = STATE.lessonCache[courseId] || {};
  if (STATE.lessonCache[courseId][lessonId]) return STATE.lessonCache[courseId][lessonId];

  const { data, error } = await supabaseClient.functions.invoke(LESSON_EDGE_FUNCTION, {
    body: { course_id: courseId, lesson_id: lessonId }
  });
  if (error) throw error;
  const html = data?.html || "";
  STATE.lessonCache[courseId][lessonId] = html;
  return html;
}



const LEGAL_META = {
            // Business/entity details
            businessName: 'The Work World',
            jurisdiction: 'United States (Colorado)',
            mailingAddress: 'Colorado, United States',
            lastUpdated: 'February 2, 2026',
            contactEmail: 'theworkworlduniversity@gmail.com'
        };

        function renderLegalLayout(title, subtitle, bodyHtml) {
            return `
                <section class="py-16 container mx-auto px-4 max-w-4xl flex-grow">
                    <div class="mb-8 p-6 bg-[#111] rounded-xl border border-gold/50">
                        <h1 class="text-4xl text-white headline-font mb-2">${title}</h1>
                        <p class="text-gold text-sm font-semibold uppercase tracking-widest">${subtitle}</p>
                        <p class="text-gray-400 text-xs mt-2">Business: ${LEGAL_META.businessName} • Jurisdiction: ${LEGAL_META.jurisdiction}</p>
                        <p class="text-gray-400 text-xs mt-1">Last updated: ${LEGAL_META.lastUpdated} • Contact: ${LEGAL_META.contactEmail}</p>
                    </div>

                    <div class="prose prose-invert max-w-none text-gray-200">
                        ${bodyHtml}
                    </div>

                    <div class="mt-10 flex flex-wrap gap-3">
                        <button type="button" data-nav="home" class="px-6 py-3 bg-gold text-black font-bold uppercase rounded-md shadow-lg transition duration-300 btn-hover-gold">
                            Back to Home
                        </button>
                        <button type="button" data-nav="courses" class="px-6 py-3 bg-black text-gold font-bold uppercase rounded-md border border-gold transition duration-300 hover:bg-[#111]">
                            View Courses
                        </button>
                    </div>
                </section>
            `;
        }

        
function renderAccountPage() {
    if (!STATE.user) {
        STATE.postLoginRedirect = { page: 'account' };
        return renderLoginPage();
    }

    const owned = Object.keys(STATE.entitlements || {});
    const courseLabels = {
        landscaping: 'Landscaping',
        trading: 'Trading',
        ai: 'AI Automation',
        sales: 'Sales'
    };

    const ownedList = (owned && owned.length)
        ? owned.map(id => `<li class="py-2 border-b border-zinc-800 flex items-center justify-between">
                <span>${escapeHtml(courseLabels[id] || id)}</span>
                <span class="text-xs text-gray-400">Access enabled on your account</span>
            </li>`).join('')
        : `<li class="py-2 text-gray-400">No courses are unlocked yet.</li>`;

    return `
        <section class="container mx-auto px-4 py-14 max-w-5xl">
            <div class="bg-zinc-950 border border-zinc-800 rounded-3xl p-8 shadow-xl">
                <h2 class="text-3xl md:text-4xl headline-font text-gold">My Account</h2>
                <p class="mt-2 text-gray-300">Signed in as <span class="text-white font-semibold">${escapeHtml(STATE.user.email)}</span>.</p>

                <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="p-5 rounded-2xl border border-zinc-800 bg-black">
                        <h3 class="text-lg font-bold text-white">Unlocked Courses</h3>
                        <p class="text-sm text-gray-400 mt-1">This prototype saves access on your device using your account login. When you add Gumroad, you will unlock courses after purchase.</p>
                        <ul class="mt-4 text-sm text-gray-200">
                            ${ownedList}
                        </ul>
                    </div>

                    <div class="p-5 rounded-2xl border border-zinc-800 bg-black">
                        <h3 class="text-lg font-bold text-white">Next Steps</h3>
                        <ol class="mt-3 space-y-2 text-sm text-gray-300 list-decimal list-inside">
                            <li>Create your Gumroad products and upload the Start Here PDF.</li>
                            <li>Add Gumroad “Buy” buttons to each course card on this site.</li>
                            <li>After purchase, deliver the course link and resources in Gumroad.</li>
                        </ol>
                        <div class="mt-5 flex flex-col sm:flex-row gap-3">
                            <button type="button" data-nav="courses" class="px-5 py-2 bg-gold text-black rounded-full font-bold uppercase text-xs btn-hover-gold transition duration-300">
                                View Courses
                            </button>
                            <button type="button" data-action="signout" class="px-5 py-2 border border-gold text-gold rounded-full font-bold uppercase text-xs btn-hover-gold transition duration-300">
                                Logout
                            </button>
                        </div>
                        <p class="mt-4 text-xs text-gray-500">Support: <a class="underline hover:text-gold" href="mailto:theworkworlduniversity@gmail.com">theworkworlduniversity@gmail.com</a><span class=\"mx-2 text-gray-600\">•</span><a href=\"https://discord.gg/9GPtCBr7\" target=\"_blank\" rel=\"noopener noreferrer\" class=\"text-gold hover:underline\">Join Discord</a></p>
                    </div>
                </div>
            </div>
        </section>
    `;
}



function renderTermsPage() {
    const body = `
        <p class="text-sm text-gray-300">These Terms of Service (“Terms”) are a legal agreement between you and <span class="text-gold font-semibold">${LEGAL_META.businessName}</span> (“WWU,” “we,” “us,” or “our”). They govern your access to and use of our website, courses, community, and related services (the “Services”).</p>

        <h2 class="text-2xl text-gold headline-font mt-6">1. Acceptance of These Terms</h2>
        <p class="leading-relaxed">By visiting, browsing, creating an account, purchasing a subscription, or otherwise using the Services, you agree to these Terms and any policies referenced here (including the Privacy Policy, Cookie Policy, Refund Policy, and Full Disclaimer). If you do not agree, do not use the Services.</p>

        <h2 class="text-2xl text-gold headline-font">2. Changes to Terms</h2>
        <p class="leading-relaxed">We may update these Terms from time to time. When we do, we will update the “Last updated” date shown above. Continued use of the Services after changes take effect means you accept the updated Terms.</p>

        <h2 class="text-2xl text-gold headline-font">3. Eligibility</h2>
        <p class="leading-relaxed">You must be legally able to enter into a contract in your jurisdiction to use paid features. If you are under 18, you may use the Services only with permission and supervision of a parent/guardian who agrees to these Terms.</p>

        <h2 class="text-2xl text-gold headline-font">4. Accounts and Authentication</h2>
        <ul class="list-disc pl-6 leading-relaxed">
            <li><span class="text-gold font-semibold">Account required:</span> Some features require an account (for example: saving progress, accessing premium content, or viewing account status).</li>
            <li><span class="text-gold font-semibold">Keep your account secure:</span> You are responsible for maintaining the confidentiality of your login credentials and for any activity under your account.</li>
            <li><span class="text-gold font-semibold">Accurate information:</span> You agree to provide accurate and current account information.</li>
        </ul>

        <h2 class="text-2xl text-gold headline-font">5. Subscriptions, Billing, and Renewal</h2>
        <p class="leading-relaxed">We may offer paid subscriptions and other purchase options. Pricing, billing intervals, and included features are presented at checkout or on the pricing page. Unless otherwise stated, subscriptions may renew automatically until canceled.</p>
        <ul class="list-disc pl-6 leading-relaxed">
            <li><span class="text-gold font-semibold">Third‑party payments:</span> Payments may be processed by third‑party providers. We do not store your full payment card number on this website file.</li>
            <li><span class="text-gold font-semibold">Access:</span> Access to premium content may be limited, suspended, or revoked if payment fails, is reversed, or if your account violates these Terms.</li>
        </ul>

        <h2 class="text-2xl text-gold headline-font">6. Cancellations and No Refunds</h2>
        <p class="leading-relaxed">You may cancel at any time via the cancellation method provided by the payment platform or by contacting support (if a manual process is required). Unless required by law, <span class="text-gold font-semibold">all sales are final</span> and we do not provide refunds. Please review the Refund Policy for full details.</p>

        <h2 class="text-2xl text-gold headline-font">7. License to Use the Services</h2>
        <p class="leading-relaxed">Subject to these Terms, we grant you a limited, non‑exclusive, non‑transferable, revocable license to access the Services for your personal, non‑commercial use. You may not resell, redistribute, or publicly display our content without written permission.</p>

        <h2 class="text-2xl text-gold headline-font">8. Intellectual Property</h2>
        <p class="leading-relaxed">The Services, including course content, text, graphics, brand elements, templates, downloads, and design, are owned by WWU or our licensors and are protected by intellectual property laws. You do not acquire any ownership rights by using the Services.</p>

        <h2 class="text-2xl text-gold headline-font">9. Prohibited Conduct</h2>
        <ul class="list-disc pl-6 leading-relaxed">
            <li>Copying, scraping, mirroring, bulk‑downloading, or redistributing content without permission.</li>
            <li>Sharing accounts, bypassing paywalls, or enabling others to access content you did not purchase.</li>
            <li>Attempting to reverse engineer, exploit, disrupt, or gain unauthorized access to the Services.</li>
            <li>Using the Services for unlawful, harmful, deceptive, or harassing purposes.</li>
            <li>Posting or transmitting malware, spam, or content that infringes others’ rights.</li>
        </ul>

        <h2 class="text-2xl text-gold headline-font">10. Community and Third‑Party Platforms</h2>
        <p class="leading-relaxed">We may provide access to community spaces (for example, Discord). Community platforms are operated by third parties and are subject to their own terms and policies. You agree to follow community rules and behave respectfully. We may remove access to community features for violations.</p>

        <h2 class="text-2xl text-gold headline-font">11. User Submissions</h2>
        <p class="leading-relaxed">If you submit content (comments, feedback, testimonials, messages, or other materials), you grant WWU a worldwide, royalty‑free license to use, reproduce, modify, and display that content for operating and improving the Services, unless prohibited by law. You represent you have the rights necessary to submit that content.</p>

        <h2 class="text-2xl text-gold headline-font">12. Educational Use Only; No Professional Advice</h2>
        <p class="leading-relaxed">The Services are for educational and informational purposes only. We do not provide individualized legal, tax, financial, investment, medical, or professional advice. You are responsible for evaluating information and making your own decisions.</p>

        <h2 class="text-2xl text-gold headline-font">13. Earnings and Results Disclaimer</h2>
        <p class="leading-relaxed">We do not promise or guarantee specific outcomes, income, profits, or results. Any examples are illustrative only and your results will vary based on effort, experience, market conditions, and many other factors.</p>

        <h2 class="text-2xl text-gold headline-font">14. Disclaimers</h2>
        <p class="leading-relaxed">THE SERVICES ARE PROVIDED “AS IS” AND “AS AVAILABLE.” TO THE MAXIMUM EXTENT PERMITTED BY LAW, WE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, AND NON‑INFRINGEMENT.</p>

        <h2 class="text-2xl text-gold headline-font">15. Limitation of Liability</h2>
        <p class="leading-relaxed">TO THE MAXIMUM EXTENT PERMITTED BY LAW, WWU WILL NOT BE LIABLE FOR ANY INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL, OR PUNITIVE DAMAGES, OR ANY LOSS OF PROFITS, REVENUE, DATA, OR GOODWILL, ARISING FROM OR RELATED TO YOUR USE OF THE SERVICES.</p>

        <h2 class="text-2xl text-gold headline-font">16. Indemnification</h2>
        <p class="leading-relaxed">You agree to defend, indemnify, and hold harmless WWU and its owners, employees, contractors, and affiliates from any claims, damages, liabilities, and expenses (including reasonable attorneys’ fees) arising from your use of the Services, your submissions, or your violation of these Terms.</p>

        <h2 class="text-2xl text-gold headline-font">17. Suspension and Termination</h2>
        <p class="leading-relaxed">We may suspend or terminate access to the Services at any time if we believe you violated these Terms, if required by law, or to protect the Services and users. Termination may include removing access to paid content without refund where permitted by law.</p>

        <h2 class="text-2xl text-gold headline-font">18. Governing Law and Venue</h2>
        <p class="leading-relaxed">These Terms are governed by the laws of ${LEGAL_META.jurisdiction}, without regard to conflict‑of‑law rules. Any disputes will be brought in a court of competent jurisdiction in that location, unless applicable law requires otherwise.</p>

        <h2 class="text-2xl text-gold headline-font">19. Severability</h2>
        <p class="leading-relaxed">If any provision of these Terms is found unenforceable, the remaining provisions will remain in effect.</p>

        <h2 class="text-2xl text-gold headline-font">20. Contact</h2>
        <p class="leading-relaxed">Questions about these Terms can be sent to <span class="text-gold font-semibold">${LEGAL_META.contactEmail}</span>. Mailing address: <span class="text-gold font-semibold">${LEGAL_META.mailingAddress}</span>.</p>
    `;
    return renderLegalLayout('Terms of Service', 'The rules for using the platform', body);
}


        
function renderPrivacyPage() {
    const body = `
        <p class="text-sm text-gray-300">This Privacy Policy explains how <span class="text-gold font-semibold">${LEGAL_META.businessName}</span> (“WWU,” “we,” “us,” or “our”) collects, uses, discloses, and protects information when you use our Services.</p>

        <h2 class="text-2xl text-gold headline-font mt-6">1. What We Collect</h2>
        <p class="leading-relaxed">We collect information in three ways: (a) information you provide, (b) information collected automatically when you use the Services, and (c) information from third parties you authorize.</p>

        <h3 class="text-xl text-gold headline-font">1.1 Information you provide</h3>
        <ul class="list-disc pl-6 leading-relaxed">
            <li><span class="text-gold font-semibold">Account information:</span> email address and identifiers needed to create and maintain your account.</li>
            <li><span class="text-gold font-semibold">Communications:</span> messages you send to support or to community moderators.</li>
            <li><span class="text-gold font-semibold">Optional inputs:</span> course preferences, survey responses, or other information you submit voluntarily.</li>
        </ul>

        <h3 class="text-xl text-gold headline-font">1.2 Information collected automatically</h3>
        <ul class="list-disc pl-6 leading-relaxed">
            <li><span class="text-gold font-semibold">Usage data:</span> pages viewed, interactions, and feature usage.</li>
            <li><span class="text-gold font-semibold">Device and log data:</span> browser type, operating system, approximate location derived from IP address, and troubleshooting logs.</li>
            <li><span class="text-gold font-semibold">Cookies & similar tech:</span> cookies, local storage, and similar technologies used for essential operation and preferences (see Cookie Policy).</li>
        </ul>

        <h3 class="text-xl text-gold headline-font">1.3 Information from third parties</h3>
        <p class="leading-relaxed">If you sign in through a third‑party provider or payment processor, we may receive limited information necessary to provide the Services (for example: a user ID, email, and payment status). We do not receive your password from these providers.</p>

        <h2 class="text-2xl text-gold headline-font">2. How We Use Information</h2>
        <ul class="list-disc pl-6 leading-relaxed">
            <li>Provide, operate, and maintain the Services (including authentication and access control).</li>
            <li>Process purchases and manage subscriptions (including receipts and account status).</li>
            <li>Personalize your experience (such as remembering preferences and progress).</li>
            <li>Communicate with you about updates, security notices, and support requests.</li>
            <li>Improve the Services, troubleshoot issues, and prevent fraud or abuse.</li>
            <li>Comply with legal obligations and enforce our Terms and policies.</li>
        </ul>

        <h2 class="text-2xl text-gold headline-font">3. Legal Bases (where applicable)</h2>
        <p class="leading-relaxed">Depending on your location, we process information based on one or more of the following: (a) performance of a contract (to provide the Services), (b) legitimate interests (security, improvement, fraud prevention), (c) consent (optional cookies/marketing where required), and/or (d) legal obligations.</p>

        <h2 class="text-2xl text-gold headline-font">4. How We Share Information</h2>
        <p class="leading-relaxed">We do not sell your personal information. We may share information in these situations:</p>
        <ul class="list-disc pl-6 leading-relaxed">
            <li><span class="text-gold font-semibold">Service providers:</span> hosting, authentication, payment processing, email delivery, and customer support tools (only as needed to operate the Services).</li>
            <li><span class="text-gold font-semibold">Compliance and safety:</span> to comply with law, respond to lawful requests, or protect rights, safety, and integrity of users and the Services.</li>
            <li><span class="text-gold font-semibold">Business changes:</span> in connection with a merger, acquisition, financing, or sale of assets (subject to applicable privacy protections).</li>
        </ul>

        <h2 class="text-2xl text-gold headline-font">5. Cookies and Similar Technologies</h2>
        <p class="leading-relaxed">We use cookies and similar technologies (such as local storage) for essential site operation (keeping you signed in, remembering settings) and, if enabled, for analytics. You can read details and controls in our Cookie Policy.</p>

        <h2 class="text-2xl text-gold headline-font">6. Data Retention</h2>
        <p class="leading-relaxed">We keep personal information only as long as necessary to provide the Services, comply with legal obligations, resolve disputes, and enforce agreements. Retention periods vary depending on the type of data and why it is processed.</p>

        <h2 class="text-2xl text-gold headline-font">7. Security</h2>
        <p class="leading-relaxed">We use reasonable administrative, technical, and physical safeguards designed to protect information. No method of transmission or storage is 100% secure, so we cannot guarantee absolute security.</p>

        <h2 class="text-2xl text-gold headline-font">8. Your Choices and Rights</h2>
        <p class="leading-relaxed">Depending on your location, you may have rights to access, correct, delete, or obtain a copy of your personal information, and to object or restrict certain processing. You may also opt out of certain communications.</p>
        <ul class="list-disc pl-6 leading-relaxed">
            <li><span class="text-gold font-semibold">Cookie choices:</span> use the cookie banner and your browser settings to manage cookies.</li>
            <li><span class="text-gold font-semibold">Account deletion:</span> contact us to request deletion; certain records may be retained as required by law.</li>
            <li><span class="text-gold font-semibold">Marketing opt‑out:</span> unsubscribe links may be provided in emails where applicable.</li>
        </ul>

        <h2 class="text-2xl text-gold headline-font">9. Children’s Privacy</h2>
        <p class="leading-relaxed">The Services are not intended for children under 13 (or the minimum age in your jurisdiction). We do not knowingly collect personal information from children. If you believe a child provided information, contact us and we will take reasonable steps to delete it.</p>

        <h2 class="text-2xl text-gold headline-font">10. International Users</h2>
        <p class="leading-relaxed">If you access the Services from outside our primary jurisdiction, your information may be processed in countries with different data protection laws. Where required, we take steps to provide appropriate safeguards.</p>

        <h2 class="text-2xl text-gold headline-font">11. Updates to This Policy</h2>
        <p class="leading-relaxed">We may update this Privacy Policy occasionally. The “Last updated” date will reflect changes. Continued use after updates means you accept the revised policy.</p>

        <h2 class="text-2xl text-gold headline-font">12. Contact Us</h2>
        <p class="leading-relaxed">Questions or requests regarding privacy may be sent to <span class="text-gold font-semibold">${LEGAL_META.contactEmail}</span>. Mailing address: <span class="text-gold font-semibold">${LEGAL_META.mailingAddress}</span>.</p>
    `;
    return renderLegalLayout('Privacy Policy', 'How we collect and use information', body);
}


        
function renderRefundPolicyPage() {
    const body = `
        <p class="text-sm text-gray-300">This Refund Policy applies to purchases and subscriptions made through <span class="text-gold font-semibold">${LEGAL_META.businessName}</span> (“WWU”). It is part of our Terms of Service.</p>

        <h2 class="text-2xl text-gold headline-font mt-6">1. All Sales Final — No Refunds</h2>
        <p class="leading-relaxed"><span class="text-gold font-semibold">We do not offer refunds</span> for any purchases, subscriptions, renewal charges, partial billing periods, unused time, or accidental purchases. Once access is granted, the sale is final.</p>

        <h2 class="text-2xl text-gold headline-font">2. Cancel Anytime (Stops Future Charges)</h2>
        <p class="leading-relaxed">You may cancel your subscription at any time. Cancellation stops future renewals, but you may continue to have access through the end of your current paid billing period unless otherwise stated at checkout.</p>

        <h2 class="text-2xl text-gold headline-font">3. Chargebacks and Payment Disputes</h2>
        <p class="leading-relaxed">If you initiate a chargeback or payment dispute, we may immediately suspend access to the Services until the dispute is resolved. We reserve the right to terminate accounts associated with excessive or fraudulent disputes.</p>

        <h2 class="text-2xl text-gold headline-font">4. Technical Issues</h2>
        <p class="leading-relaxed">If you experience a technical issue that prevents access, contact support at <span class="text-gold font-semibold">${LEGAL_META.contactEmail}</span> and we will make reasonable efforts to resolve it. Technical issues do not change our no‑refund policy, but we will work with you to restore access where possible.</p>

        <h2 class="text-2xl text-gold headline-font">5. Exceptions Required by Law</h2>
        <p class="leading-relaxed">Some jurisdictions provide mandatory refund or “cooling‑off” rights for certain purchases. If a refund is required by applicable law, we will honor those requirements. In all other cases, our no‑refund policy applies.</p>

        <h2 class="text-2xl text-gold headline-font">6. Contact</h2>
        <p class="leading-relaxed">Refund policy questions can be sent to <span class="text-gold font-semibold">${LEGAL_META.contactEmail}</span>.</p>
    `;
    return renderLegalLayout('Refund Policy', 'No refunds • Cancel anytime', body);
}


        
function renderCookiePolicyPage() {
    const body = `
        <p class="text-sm text-gray-300">This Cookie Policy explains how <span class="text-gold font-semibold">${LEGAL_META.businessName}</span> (“WWU”) uses cookies and similar technologies (including local storage) on our Services.</p>

        <h2 class="text-2xl text-gold headline-font mt-6">1. What Are Cookies?</h2>
        <p class="leading-relaxed">Cookies are small text files placed on your device by websites. They help websites remember your actions and preferences (such as login state, language, or settings) over time. We also use similar technologies such as local storage, session storage, and device identifiers.</p>

        <h2 class="text-2xl text-gold headline-font">2. Why We Use Cookies and Similar Tech</h2>
        <ul class="list-disc pl-6 leading-relaxed">
            <li><span class="text-gold font-semibold">Essential operation:</span> keep the site working, maintain sessions, and support security features.</li>
            <li><span class="text-gold font-semibold">Preferences:</span> remember settings (like cookie choices and UI preferences).</li>
            <li><span class="text-gold font-semibold">Performance & analytics (optional):</span> understand how the site is used so we can improve it. We only enable optional analytics where appropriate and where consent is required.</li>
        </ul>

        <h2 class="text-2xl text-gold headline-font">3. Types of Cookies</h2>
        <ul class="list-disc pl-6 leading-relaxed">
            <li><span class="text-gold font-semibold">Session cookies:</span> temporary cookies that expire when you close your browser.</li>
            <li><span class="text-gold font-semibold">Persistent cookies:</span> remain until they expire or you delete them.</li>
            <li><span class="text-gold font-semibold">First‑party cookies:</span> set by WWU.</li>
            <li><span class="text-gold font-semibold">Third‑party cookies:</span> set by services we use (for example, authentication or payment providers), subject to their policies.</li>
        </ul>

        <h2 class="text-2xl text-gold headline-font">4. What We Store in Local Storage (Examples)</h2>
        <p class="leading-relaxed">Depending on your use of the Services, we may store limited data in your browser for functionality, such as:</p>
        <ul class="list-disc pl-6 leading-relaxed">
            <li><span class="text-gold font-semibold">Authentication state</span> (to keep you signed in)</li>
            <li><span class="text-gold font-semibold">Cookie consent choice</span> (accepted/declined)</li>
            <li><span class="text-gold font-semibold">Course access flags</span> or preferences tied to your account</li>
        </ul>
        <p class="leading-relaxed">This storage helps the site function smoothly. You can clear it at any time from your browser settings, but doing so may sign you out or reset preferences.</p>

        <h2 class="text-2xl text-gold headline-font">5. Managing Cookies</h2>
        <p class="leading-relaxed">You can manage cookies in several ways:</p>
        <ul class="list-disc pl-6 leading-relaxed">
            <li>Use the cookie banner to accept or decline non‑essential cookies.</li>
            <li>Adjust your browser settings to block or delete cookies.</li>
            <li>Clear local storage/site data via your browser privacy settings.</li>
        </ul>
        <p class="leading-relaxed">Blocking certain cookies may impact functionality (such as staying logged in).</p>

        <h2 class="text-2xl text-gold headline-font">6. Do Not Track</h2>
        <p class="leading-relaxed">Some browsers send “Do Not Track” signals. Because there is not a consistent industry standard, we do not respond to all such signals in a uniform way, but we respect applicable privacy laws and provide choices where required.</p>

        <h2 class="text-2xl text-gold headline-font">7. Updates</h2>
        <p class="leading-relaxed">We may update this Cookie Policy. The “Last updated” date shown above reflects the most recent revision.</p>

        <h2 class="text-2xl text-gold headline-font">8. Contact</h2>
        <p class="leading-relaxed">Questions about cookies can be sent to <span class="text-gold font-semibold">${LEGAL_META.contactEmail}</span>.</p>
    `;
    return renderLegalLayout('Cookie Policy', 'Cookies, local storage, and preferences', body);
}


        
function renderDisclaimerPage() {
    const body = `
        <p class="text-sm text-gray-300">This Full Disclaimer is provided by <span class="text-gold font-semibold">${LEGAL_META.businessName}</span> (“WWU”). It applies to all content, courses, downloads, and community interactions offered through our Services.</p>

        <h2 class="text-2xl text-gold headline-font mt-6">1. Educational and Informational Only</h2>
        <p class="leading-relaxed">All content is provided for educational and informational purposes only. It is not individualized advice and should not be relied upon as a substitute for professional guidance.</p>

        <h2 class="text-2xl text-gold headline-font">2. No Legal, Tax, Financial, or Investment Advice</h2>
        <p class="leading-relaxed">WWU does not provide legal, tax, accounting, financial planning, investment, medical, or other professional advice. You should consult qualified professionals before making decisions that may impact your finances, business, taxes, or legal rights.</p>

        <h2 class="text-2xl text-gold headline-font">3. Trading and Investing Risk Disclosure</h2>
        <p class="leading-relaxed">Trading and investing involve risk and may not be suitable for everyone. You can lose some or all of your money. Past performance does not guarantee future results. Any strategies discussed are examples and are not recommendations to buy or sell any security, cryptocurrency, or asset.</p>

        <h2 class="text-2xl text-gold headline-font">4. Earnings and Results Disclaimer</h2>
        <p class="leading-relaxed">We do not guarantee any income, profits, business results, or outcomes. Any income examples, testimonials, or case studies (if provided) are not promises; they are illustrative and your results will vary widely based on many factors beyond our control.</p>

        <h2 class="text-2xl text-gold headline-font">5. Testimonials and Examples</h2>
        <p class="leading-relaxed">Testimonials and success stories (if shown) represent individual experiences. They do not represent typical results. We may edit testimonials for clarity and length without changing the substance.</p>

        <h2 class="text-2xl text-gold headline-font">6. Third‑Party Tools, Links, and Platforms</h2>
        <p class="leading-relaxed">We may reference third‑party tools, websites, or platforms. We do not control and are not responsible for third‑party content, terms, privacy practices, or availability. Your use of third‑party services is at your own risk.</p>

        <h2 class="text-2xl text-gold headline-font">7. Accuracy and Updates</h2>
        <p class="leading-relaxed">We aim to provide high‑quality information, but we do not guarantee that content is complete, current, or error‑free. Markets, laws, and platforms change. You are responsible for verifying information and applying it appropriately.</p>

        <h2 class="text-2xl text-gold headline-font">8. No Warranties</h2>
        <p class="leading-relaxed">To the maximum extent permitted by law, the Services are provided “as is” and “as available,” without warranties of any kind, express or implied, including implied warranties of merchantability, fitness for a particular purpose, and non‑infringement.</p>

        <h2 class="text-2xl text-gold headline-font">9. Limitation of Liability</h2>
        <p class="leading-relaxed">To the maximum extent permitted by law, WWU will not be liable for any indirect, incidental, special, consequential, or punitive damages, or any loss of profits, revenue, data, or goodwill arising out of or related to your use of the Services.</p>

        <h2 class="text-2xl text-gold headline-font">10. Your Responsibility</h2>
        <p class="leading-relaxed">You are responsible for your decisions, actions, and results. By using the Services, you acknowledge that you assume all risks associated with applying information from WWU.</p>

        <h2 class="text-2xl text-gold headline-font">11. Contact</h2>
        <p class="leading-relaxed">Questions about this Disclaimer can be sent to <span class="text-gold font-semibold">${LEGAL_META.contactEmail}</span>.</p>
    `;
    return renderLegalLayout('Full Disclaimer', 'Read before you act', body);
}

        
        function renderMissionSection() {
            return `
                <section class="py-16 lg:py-24 container mx-auto px-4 max-w-7xl">
                    <h3 class="text-4xl sm:text-5xl text-gold headline-font mb-12 text-center border-b border-gold/50 pb-4">
                        OUR APPROACH: PRACTICAL EXECUTION OVER THEORY
                    </h3>
                    <div class="grid md:grid-cols-2 gap-12">
                        <div class="p-6 bg-[#111] rounded-xl shadow-xl border-t-4 border-gold">
                            <h4 class="text-3xl font-extrabold text-white mb-4">WHAT YOU GET</h4>
                            <p class="text-gray-300 text-lg leading-relaxed">
                                The Work World is built for people who want market-relevant skills and a clear path to applying them.
                                The courses focus on execution: systems, workflows, and decision-making you can implement immediately.
                                We are not an accredited degree program; we provide training content and tools designed to help you operate more effectively.
                            </p>
                        </div>
                        <div class="p-6 bg-[#111] rounded-xl shadow-xl border-t-4 border-gold">
                            <h4 class="text-3xl font-extrabold text-white mb-4">HOW IT'S DIFFERENT</h4>
                            <ul class="space-y-3 text-lg text-gray-300">
                                <li class="flex items-start">
                                    <span class="text-gold mr-3 mt-1 font-bold text-2xl">&bull;</span>
                                    <strong>Applied lessons:</strong> frameworks, checklists, and operating systems—built to be used in the real world.
                                </li>
                                <li class="flex items-start">
                                    <span class="text-gold mr-3 mt-1 font-bold text-2xl">&bull;</span>
                                    <strong>Focused curriculum:</strong> shorter, higher-signal modules designed to reduce time-to-implementation.
                                </li>
                                <li class="flex items-start">
                                    <span class="text-gold mr-3 mt-1 font-bold text-2xl">&bull;</span>
                                    <strong>Responsible expectations:</strong> we teach methods and decision frameworks; results depend on your effort, experience, and market conditions.
                                </li>
                            </ul>
                        </div>
                    </div>
                </section>
            `;
        }

        
        function renderCorruptionSection() {
            return `
                <section class="py-16 lg:py-24 container mx-auto px-4 max-w-7xl bg-black">
                    <h3 class="text-4xl sm:text-5xl text-white headline-font mb-12 text-center border-b border-white/20 pb-4">
                        WHY SKILLS-FIRST TRAINING MATTERS
                    </h3>
                    <div class="grid md:grid-cols-2 gap-12">
                        <div class="p-6 bg-[#111] rounded-xl shadow-xl border-l-4 border-white/30">
                            <h4 class="text-3xl font-extrabold text-white mb-4">COMMON FRUSTRATIONS WITH TRADITIONAL PATHS</h4>
                            <ul class="space-y-4 text-lg text-gray-300">
                                <li class="flex items-start">
                                    <span class="text-white/70 mr-3 mt-1 font-bold text-2xl">•</span>
                                    <strong>Cost and time:</strong> many programs are expensive and slow to update, even when markets move quickly.
                                </li>
                                <li class="flex items-start">
                                    <span class="text-white/70 mr-3 mt-1 font-bold text-2xl">•</span>
                                    <strong>Too much theory:</strong> not enough operational guidance on how to apply concepts day-to-day.
                                </li>
                                <li class="flex items-start">
                                    <span class="text-white/70 mr-3 mt-1 font-bold text-2xl">•</span>
                                    <strong>Unclear outcomes:</strong> learners often finish without a practical system they can implement immediately.
                                </li>
                            </ul>
                        </div>
                        <div class="p-6 bg-[#111] rounded-xl shadow-xl border-l-4 border-gold">
                            <h4 class="text-3xl font-extrabold text-gold mb-4">THE WORK WORLD APPROACH</h4>
                            <ul class="space-y-4 text-lg text-gray-300">
                                <li class="flex items-start">
                                    <span class="text-gold mr-3 mt-1 font-bold text-2xl">✓</span>
                                    <strong>Actionable systems:</strong> repeatable workflows for operations, sales, and productivity.
                                </li>
                                <li class="flex items-start">
                                    <span class="text-gold mr-3 mt-1 font-bold text-2xl">✓</span>
                                    <strong>Execution-ready structure:</strong> clear steps, templates, and exercises that make implementation straightforward.
                                </li>
                                <li class="flex items-start">
                                    <span class="text-gold mr-3 mt-1 font-bold text-2xl">✓</span>
                                    <strong>Professional framing:</strong> guidance designed to help you make better decisions—not promises of income or outcomes.
                                </li>
                            </ul>
                        </div>
                    </div>
                </section>
            `;
        }


        
        function renderLoginPage() {
            const redirectLabel = STATE.postLoginRedirect ? 'Continue' : 'Enter';
            return `
                <section class="container mx-auto px-4 py-14 max-w-5xl">
                    <div class="grid md:grid-cols-2 gap-10 items-start">
                        <div>
                            <h2 class="text-4xl md:text-5xl headline-font mb-4">
                                <span class="text-gold">Log in</span> to The Work World
                            </h2>
                            <p class="text-gray-300 leading-relaxed mb-6">
                                Sign in to access your account. Your email and password are secured by Supabase authentication.
                            </p>

                            <div class="bg-black border border-gold/50 rounded-2xl p-6 shadow-xl">
                                <div class="flex gap-3 mb-6">
                                    <button id="authTabLogin" class="px-4 py-2 rounded-lg bg-gold text-black font-bold uppercase text-xs btn-hover-gold transition">Log In</button>
                                    <button id="authTabSignup" class="px-4 py-2 rounded-lg border border-gold/60 text-gold font-bold uppercase text-xs hover:bg-gold hover:text-black transition">Sign Up</button>
                                </div>

                                <div id="authError" class="hidden mb-4 text-sm text-red-300 border border-red-400/40 rounded-lg p-3"></div>

                                <form id="loginForm" class="space-y-4">
                                    <div>
                                        <label class="block text-xs uppercase text-gray-400 mb-2">Email</label>
                                        <input id="loginEmail" type="email" autocomplete="email" required
                                            class="w-full bg-black border border-gold/40 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-gold/60"
                                            placeholder="you@example.com" />
                                    </div>
                                    <div>
                                        <label class="block text-xs uppercase text-gray-400 mb-2">Password</label>
                                        <input id="loginPassword" type="password" autocomplete="current-password" required
                                            class="w-full bg-black border border-gold/40 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-gold/60"
                                            placeholder="••••••••" />
                                    </div>
                                    <button type="submit"
                                        class="w-full px-5 py-3 bg-gold text-black rounded-lg font-extrabold uppercase btn-hover-gold transition">
                                        ${redirectLabel}
                                    </button>

                                    <button type="button" id="continueGuest"
                                        class="w-full px-5 py-3 border border-gold/50 text-gold rounded-lg font-bold uppercase hover:bg-gold hover:text-black transition">
                                        Continue without account
                                    </button>
                                </form>

                                <form id="signupForm" class="space-y-4 hidden">
                                    <div>
                                        <label class="block text-xs uppercase text-gray-400 mb-2">Email</label>
                                        <input id="signupEmail" type="email" autocomplete="email" required
                                            class="w-full bg-black border border-gold/40 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-gold/60"
                                            placeholder="you@example.com" />
                                    </div>
                                    <div>
                                        <label class="block text-xs uppercase text-gray-400 mb-2">Password</label>
                                        <input id="signupPassword" type="password" autocomplete="new-password" required minlength="6"
                                            class="w-full bg-black border border-gold/40 rounded-lg px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-gold/60"
                                            placeholder="At least 6 characters" />
                                    </div>
                                    <button type="submit"
                                        class="w-full px-5 py-3 bg-gold text-black rounded-lg font-extrabold uppercase btn-hover-gold transition">
                                        Create account
                                    </button>

                                    <p class="text-xs text-gray-400 leading-relaxed">
                                        If your project requires email confirmation, you may be asked to verify your email before logging in.
                                    </p>
                                </form>
                            </div>
                        </div>

                        <div class="bg-black border border-gold/50 rounded-2xl p-6 shadow-xl">
                            <h3 class="text-xl font-extrabold mb-3">What you get after login</h3>
                            <ul class="space-y-3 text-gray-300 text-sm leading-relaxed">
                                <li>• Your account is tied to a real email/password login</li>
                                <li>• A clean path to connect real subscriptions later (Stripe + backend)</li>
                                <li>• You keep the same site experience—courses, lessons, and pages stay the same</li>
                            </ul>
                            <div class="mt-6 p-4 rounded-xl border border-gold/40 bg-black/60">
                                <p class="text-xs text-gray-400">
                                    Security note: passwords are handled by Supabase and are not stored in this website.
                                </p>
                            </div>
                        </div>
                    </div>
                </section>
            `;
        }

        function initAuthForms() {
            const loginForm = document.getElementById('loginForm');
            const signupForm = document.getElementById('signupForm');
            const tabLogin = document.getElementById('authTabLogin');
            const tabSignup = document.getElementById('authTabSignup');
            const err = document.getElementById('authError');
            const guestBtn = document.getElementById('continueGuest');

            if (!loginForm || !signupForm || !tabLogin || !tabSignup) return;

            const showError = (msg) => {
                if (!err) return;
                err.textContent = msg || 'Something went wrong.';
                err.classList.remove('hidden');
            };
            const clearError = () => err?.classList.add('hidden');

            const setTab = (mode) => {
                clearError();
                const isLogin = mode === 'login';
                loginForm.classList.toggle('hidden', !isLogin);
                signupForm.classList.toggle('hidden', isLogin);

                tabLogin.classList.toggle('bg-gold', isLogin);
                tabLogin.classList.toggle('text-black', isLogin);
                tabLogin.classList.toggle('border', !isLogin);

                tabSignup.classList.toggle('bg-gold', !isLogin);
                tabSignup.classList.toggle('text-black', !isLogin);
            };

            tabLogin.onclick = () => setTab('login');
            tabSignup.onclick = () => setTab('signup');

            guestBtn && (guestBtn.onclick = () => {
                STATE.postLoginRedirect = null;
                navigateTo('home');
            });

            // Patch the guest navigation cleanly (avoid string interpolation collisions)
            if (guestBtn) guestBtn.onclick = () => { STATE.postLoginRedirect = null; navigateTo('home'); };

            loginForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                clearError();
                const email = document.getElementById('loginEmail')?.value || '';
                const pw = document.getElementById('loginPassword')?.value || '';
                try {
                    const user = await signIn(email, pw);
                    STATE.user = user;
                    if (STATE.postLoginRedirect) {
                        const { page, courseId, lessonId } = STATE.postLoginRedirect;
                        STATE.postLoginRedirect = null;
                        navigateTo(page, courseId, lessonId);
                    } else {
                        navigateTo('home');
                    }
                } catch (ex) {
                    showError(ex?.message || 'Login failed.');
                }
            });

            signupForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                clearError();
                const email = document.getElementById('signupEmail')?.value || '';
                const pw = document.getElementById('signupPassword')?.value || '';
                try {
                    const user = await createAccount(email, pw);
                    STATE.user = user;                    navigateTo('home');
                } catch (ex) {
                    showError(ex?.message || 'Sign up failed.');
                }
            });
        }


        function renderHomePage() {
            // A. Hero Section 

            const hero = `
                <section class="py-20 lg:py-32 bg-black text-center border-b border-gold/30">
                    <div class="container mx-auto px-4 max-w-5xl">
                        <p class="text-gold uppercase tracking-widest text-lg mb-4 font-bold">The Work World Program</p>
                        <h2 class="text-6xl sm:text-8xl lg:text-9xl text-white headline-font leading-tight mb-8">
                            BUILD SKILLS. <span class="text-gold block sm:inline">APPLY THEM.</span>
                        </h2>
                        <p class="text-xl sm:text-2xl text-white mb-10 max-w-3xl mx-auto font-light">
                            Focused, execution-oriented courses in operations, trading basics, AI workflows, and sales—designed to be implemented.
                        </p>
                        <button type="button" data-nav="courses" class="px-10 py-4 bg-gold text-black text-xl font-extrabold uppercase rounded-lg shadow-2xl shadow-gold/50 transition duration-300 btn-hover-gold">
                            Browse Courses &rarr;
                        </button>
                    </div>
                </section>
            `;

            // B. WWU Mission and Difference
            const missionSection = renderMissionSection();
            
            // C. Corruption and Solution Section
            const corruptionSection = renderCorruptionSection();

            // E. Course Previews Section 
            const coursePreviews = `
                <section class="py-16 lg:py-24 container mx-auto px-4 max-w-7xl">
                    <h3 class="text-4xl sm:text-5xl text-gold headline-font mb-12 text-center border-b border-gold/50 pb-4">
                        Explore the course library
                    </h3>
                    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                        ${COURSES.map(course => `
                            <div class="p-6 bg-black border border-gold/50 rounded-xl shadow-lg flex flex-col justify-between transform hover:shadow-gold transition duration-300">
                                <div>
                                    <div class="text-gold text-4xl mb-4">${COURSE_BADGES[course.id] || ""}</div>
                                    <h4 class="text-2xl font-extrabold text-gold mb-3">${course.title.toUpperCase()}</h4>
                                    <p class="text-gray-300 text-sm mb-4">${course.shortDesc}</p>
                                </div>
                                <button type="button" data-nav="courses" class="mt-4 px-4 py-2 bg-gold text-black text-sm font-bold uppercase rounded-md self-start btn-hover-gold">
                                    View course &rarr;
                                </button>
                            </div>
                        `).join('')}
                    </div>
                </section>
            `;


            // E2. Profit Estimator (Educational Calculator)
            const profitEstimator = `
                <section id="profitEstimator" class="py-16 lg:py-24 bg-black border-y border-gold/30">
                    <div class="container mx-auto px-4 max-w-5xl">
                        <div class="text-center mb-10">
                            <h3 class="text-4xl sm:text-5xl text-gold headline-font">Profit Estimator</h3>
                            <p class="mt-4 text-gray-300 text-lg max-w-3xl mx-auto">Use this quick calculator to estimate potential monthly and annual profit from each skill track. These are planning estimates only, not guarantees.</p>
                        
                        <div class="mt-8 grid md:grid-cols-3 gap-4">
                            <div class="bg-black/40 border border-gold/30 rounded-xl p-4">
                                <p class="text-xs font-bold uppercase tracking-widest text-gray-400 mb-2">Email</p>
                                <a class="text-gold font-semibold hover:underline break-all" href="mailto:theworkworlduniversity@gmail.com">theworkworlduniversity@gmail.com</a>
                            </div>
                            <div class="bg-black/40 border border-gold/30 rounded-xl p-4">
                                <p class="text-xs font-bold uppercase tracking-widest text-gray-400 mb-2">Typical response</p>
                                <p class="text-gray-200">Within 1–2 business days</p>
                            </div>
                            <div class="bg-black/40 border border-gold/30 rounded-xl p-4">
                                <p class="text-xs font-bold uppercase tracking-widest text-gray-400 mb-2">What to include</p>
                                <p class="text-gray-200">Course name, path, and a short description of the issue</p>
                            </div>
                        </div>
</div>

                        <div class="grid md:grid-cols-2 gap-6 mb-6">
                            <div class="bg-black border border-gold/40 rounded-2xl p-6">
                                <p class="text-gold text-xs font-bold uppercase tracking-widest mb-2">Community Support</p>
                                <h4 class="text-2xl text-white headline-font mb-2">Join the Discord</h4>
                                <p class="text-gray-300 text-sm leading-relaxed">
                                    Our Discord is where students can ask questions, share progress, and get help from moderators/admins.
                                    Post in the appropriate course channel, include a screenshot when relevant, and you’ll usually get a response faster.
                                </p>
                                <div class="mt-4 flex flex-col sm:flex-row gap-3">
                                    <a href="https://discord.gg/9GPtCBr7" target="_blank" rel="noopener noreferrer"
                                       class="inline-flex items-center justify-center bg-gold text-black px-6 py-3 rounded-md font-bold uppercase text-xs btn-hover-gold transition duration-300">
                                        Join Discord
                                    </a>
                                    <a href="#contactForm" class="inline-flex items-center justify-center border border-gold/40 text-white px-6 py-3 rounded-md font-bold uppercase text-xs hover:border-gold hover:text-gold transition duration-200">
                                        Email Support
                                    </a>
                                </div>
                                <p class="mt-3 text-xs text-gray-400">
                                    Invite link: <span class="break-all">https://discord.gg/9GPtCBr7</span>
                                </p>
                            </div>
                            <div class="bg-black border border-gold/30 rounded-2xl p-6">
                                <p class="text-gold text-xs font-bold uppercase tracking-widest mb-2">How to get help</p>
                                <ul class="text-gray-300 text-sm space-y-2 leading-relaxed">
                                    <li><span class="text-white font-semibold">1)</span> Pick your course channel (Landscaping, Trading, AI Automation, Sales).</li>
                                    <li><span class="text-white font-semibold">2)</span> Share your goal + what you tried + where you got stuck.</li>
                                    <li><span class="text-white font-semibold">3)</span> Add details: budget, location, timeline, screenshots, links.</li>
                                    <li><span class="text-white font-semibold">4)</span> You’ll get a clear next action—then report back with results.</li>
                                </ul>
                                <p class="mt-3 text-xs text-gray-400">
                                    Respectful questions get the best answers. We keep it practical, direct, and action-oriented.
                                </p>
                            </div>
                        </div>

                        <div class="bg-[#111] border border-gold/40 rounded-2xl p-6 sm:p-8">
                            <div class="grid md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-xs uppercase tracking-widest text-gray-400 mb-2">Choose a track</label>
                                    <select id="pe_track" class="w-full bg-black border border-gold/30 rounded-md px-4 py-3 text-white">
                                        <option value="landscaping">Landscaping business</option>
                                        <option value="trading">Trading (stocks/crypto)</option>
                                        <option value="ai">AI services / automation</option>
                                        <option value="sales">Sales / commissions</option>
                                    </select>

                                    <div id="pe_inputs" class="mt-6 space-y-4"></div>

                                    <button id="pe_calc_btn" class="mt-6 w-full px-6 py-3 bg-gold text-black font-bold uppercase rounded-md shadow-lg transition duration-300 btn-hover-gold">
                                        Calculate
                                    </button>

                                    <p class="mt-4 text-xs text-gray-400 leading-relaxed">
                                        Disclaimer: This tool is for educational planning only. Results vary by market, skill, effort, pricing, costs, and risk. No outcome is promised.
                                    </p>
                                </div>

                                <div class="bg-black border border-gold/30 rounded-xl p-6">
                                    <h4 class="text-xl text-white headline-font mb-3">Estimated results</h4>
                                    <div class="grid grid-cols-2 gap-4">
                                        <div class="border border-gold/20 rounded-lg p-4">
                                            <p class="text-xs uppercase tracking-widest text-gray-400">Monthly profit</p>
                                            <p id="pe_monthly" class="text-2xl text-gold font-extrabold mt-1">$0</p>
                                        </div>
                                        <div class="border border-gold/20 rounded-lg p-4">
                                            <p class="text-xs uppercase tracking-widest text-gray-400">Annual profit</p>
                                            <p id="pe_annual" class="text-2xl text-gold font-extrabold mt-1">$0</p>
                                        </div>
                                        <div class="border border-gold/20 rounded-lg p-4">
                                            <p class="text-xs uppercase tracking-widest text-gray-400">Startup cost</p>
                                            <p id="pe_startup" class="text-2xl text-gold font-extrabold mt-1">$0</p>
                                        </div>
                                        <div class="border border-gold/20 rounded-lg p-4">
                                            <p class="text-xs uppercase tracking-widest text-gray-400">Break-even (months)</p>
                                            <p id="pe_breakeven" class="text-2xl text-gold font-extrabold mt-1">—</p>
                                        </div>

                                        <div class="border border-gold/20 rounded-lg p-4 col-span-2">
                                            <p class="text-xs uppercase tracking-widest text-gray-400">Notes</p>
                                            <p id="pe_notes" class="text-gray-300 mt-2 leading-relaxed">Set your assumptions on the left, then calculate.</p>
                                        </div>
                                    </div>

                                    <div class="mt-6 flex flex-wrap gap-3">
                                        <button type="button" data-nav="courses" class="px-6 py-3 bg-black text-gold font-bold uppercase rounded-md border border-gold transition duration-300 hover:bg-[#111]">
                                            Use the courses
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            `;
            
            // E3. Track Finder (Quick Recommendation)
            const trackFinder = `
                <section id="trackFinder" class="py-16 lg:py-24 bg-black">
                    <div class="container mx-auto px-4 max-w-5xl">
                        <div class="text-center mb-10">
                            <h3 class="text-4xl sm:text-5xl text-gold headline-font">Find Your Best Starting Track</h3>
                            <p class="mt-4 text-gray-300 text-lg max-w-3xl mx-auto">
                                Answer a few quick inputs and we’ll suggest the most practical first course to focus on.
                                This is a planning tool—not a guarantee.
                            </p>
                        </div>

                        <div class="bg-[#111] border border-gold/40 rounded-2xl p-6 sm:p-8">
                            <div class="grid md:grid-cols-3 gap-6">
                                <div>
                                    <label class="block text-xs font-bold uppercase tracking-widest text-gray-400 mb-2">Primary goal</label>
                                    <select id="tf_goal" class="w-full bg-black border border-gold/30 rounded-md px-4 py-3 text-white">
                                        <option value="service">Start a service business</option>
                                        <option value="trade">Learn to trade (higher risk)</option>
                                        <option value="ai">Offer AI services</option>
                                        <option value="sales">Close more deals / commissions</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-xs font-bold uppercase tracking-widest text-gray-400 mb-2">Hours you can commit per week</label>
                                    <input id="tf_hours" type="number" min="1" max="80" value="10"
                                        class="w-full bg-black border border-gold/30 rounded-md px-4 py-3 text-white" />
                                    <p class="mt-2 text-xs text-gray-400">Be honest. Consistency beats intensity.</p>
                                </div>
                                <div>
                                    <label class="block text-xs font-bold uppercase tracking-widest text-gray-400 mb-2">Starting budget (optional)</label>
                                    <input id="tf_budget" type="number" min="0" step="50" value="500"
                                        class="w-full bg-black border border-gold/30 rounded-md px-4 py-3 text-white" />
                                    <p class="mt-2 text-xs text-gray-400">Tools, marketing, software—whatever applies.</p>
                                </div>
                            </div>

                            <div class="mt-6 flex flex-col sm:flex-row items-center gap-3">
                                <button id="tf_btn" class="bg-gold text-black px-6 py-3 rounded-md font-bold uppercase text-xs btn-hover-gold transition duration-300">
                                    Get Recommendation
                                </button>
                                <p class="text-xs text-gray-400">
                                    You can still take every course—this just helps you pick a starting point.
                                </p>
                            </div>

                            <div id="tf_output" class="mt-8 hidden">
                                <div class="border border-gold/30 rounded-xl p-5 bg-black/50">
                                    <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
                                        <div>
                                            <p class="text-xs uppercase tracking-widest text-gray-400 font-bold">Suggested first track</p>
                                            <h4 id="tf_title" class="text-2xl text-white font-extrabold mt-1"></h4>
                                            <p id="tf_reason" class="text-gray-300 mt-2"></p>
                                        </div>
                                        <div class="flex flex-col sm:flex-row gap-3">
                                            <button id="tf_course_btn" class="bg-gold text-black px-5 py-3 rounded-md font-bold uppercase text-xs btn-hover-gold transition duration-300">
                                                Open Course
                                            </button>
                                            <a href="#profitEstimator" class="px-5 py-3 rounded-md font-bold uppercase text-xs border border-gold/40 text-white hover:text-gold transition duration-300">
                                                Estimate Profit
                                            </a>
                                        </div>
                                    </div>

                                    <div class="mt-5 grid md:grid-cols-3 gap-4 text-sm">
                                        <div class="p-4 rounded-xl border border-gold/20 bg-[#0b0b0b]">
                                            <p class="text-xs uppercase tracking-widest text-gray-400 font-bold mb-1">Next step</p>
                                            <p id="tf_step1" class="text-gray-200"></p>
                                        </div>
                                        <div class="p-4 rounded-xl border border-gold/20 bg-[#0b0b0b]">
                                            <p class="text-xs uppercase tracking-widest text-gray-400 font-bold mb-1">Focus for 14 days</p>
                                            <p id="tf_step2" class="text-gray-200"></p>
                                        </div>
                                        <div class="p-4 rounded-xl border border-gold/20 bg-[#0b0b0b]">
                                            <p class="text-xs uppercase tracking-widest text-gray-400 font-bold mb-1">Avoid this</p>
                                            <p id="tf_step3" class="text-gray-200"></p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </section>
            `;

            // E4. Resource Library (Templates & Tools)
            const resourceLibrary = `
                <section id="resources" class="py-16 lg:py-24 bg-black border-y border-gold/30">
                    <div class="container mx-auto px-4 max-w-6xl">
                        <div class="text-center mb-10">
                            <h3 class="text-4xl sm:text-5xl text-gold headline-font">Templates & Tools</h3>
                            <p class="mt-4 text-gray-300 text-lg max-w-3xl mx-auto">
                                Practical plug-and-play resources you can adapt to your market. These are starter templates—customize them before use.
                            </p>
                        </div>

                        <div class="grid md:grid-cols-2 gap-6">
                            <div class="bg-[#111] border border-gold/40 rounded-2xl p-6">
                                <p class="text-xs uppercase tracking-widest text-gray-400 font-bold">Landscaping</p>
                                <h4 class="text-2xl text-white font-extrabold mt-2">Bid & Scope Template</h4>
                                <p class="text-gray-300 mt-2 text-sm">A simple scope outline to help you price jobs, set expectations, and avoid confusion.</p>
                                <button class="mt-5 bg-gold text-black px-5 py-3 rounded-md font-bold uppercase text-xs btn-hover-gold transition duration-300"
                                    data-download="landscaping-bid-template.txt">
                                    Download Template
                                </button>
                            </div>

                            <div class="bg-[#111] border border-gold/40 rounded-2xl p-6">
                                <p class="text-xs uppercase tracking-widest text-gray-400 font-bold">Sales</p>
                                <h4 class="text-2xl text-white font-extrabold mt-2">Follow-Up Script Pack</h4>
                                <p class="text-gray-300 mt-2 text-sm">Short follow-up messages for leads that went quiet—written to be direct, not pushy.</p>
                                <button class="mt-5 bg-gold text-black px-5 py-3 rounded-md font-bold uppercase text-xs btn-hover-gold transition duration-300"
                                    data-download="sales-followup-scripts.txt">
                                    Download Scripts
                                </button>
                            </div>

                            <div class="bg-[#111] border border-gold/40 rounded-2xl p-6">
                                <p class="text-xs uppercase tracking-widest text-gray-400 font-bold">AI</p>
                                <h4 class="text-2xl text-white font-extrabold mt-2">AI Service Offer Outline</h4>
                                <p class="text-gray-300 mt-2 text-sm">A simple outline for packaging an AI service so it’s understandable and sellable.</p>
                                <button class="mt-5 bg-gold text-black px-5 py-3 rounded-md font-bold uppercase text-xs btn-hover-gold transition duration-300"
                                    data-download="ai-offer-outline.txt">
                                    Download Outline
                                </button>
                            </div>

                            <div class="bg-[#111] border border-gold/40 rounded-2xl p-6">
                                <p class="text-xs uppercase tracking-widest text-gray-400 font-bold">Trading</p>
                                <h4 class="text-2xl text-white font-extrabold mt-2">Risk & Position Sizing Cheatsheet</h4>
                                <p class="text-gray-300 mt-2 text-sm">A quick reference for sizing positions and setting risk limits to avoid blow-ups.</p>
                                <button class="mt-5 bg-gold text-black px-5 py-3 rounded-md font-bold uppercase text-xs btn-hover-gold transition duration-300"
                                    data-download="trading-risk-cheatsheet.txt">
                                    Download Cheatsheet
                                </button>
                            </div>
                        </div>

                        <div class="mt-10 text-center text-xs text-gray-400">
                            These resources are provided for educational purposes only. Use at your own discretion.
                        </div>
                    </div>
                </section>
            `;

            // E5. FAQ
            const faqSection = `
                <section id="faq" class="py-16 lg:py-24 bg-black">
                    <div class="container mx-auto px-4 max-w-5xl">
                        <div class="text-center mb-10">
                            <h3 class="text-4xl sm:text-5xl text-gold headline-font">FAQ</h3>
                            <p class="mt-4 text-gray-300 text-lg max-w-3xl mx-auto">
                                A few common questions before you start.
                            </p>
                        </div>

                        <div class="space-y-4">
                            <details class="bg-[#111] border border-gold/40 rounded-2xl p-6">
                                <summary class="cursor-pointer text-white font-bold">Is this beginner-friendly?</summary>
                                <p class="mt-3 text-gray-300 text-sm">Yes. Each course starts with fundamentals and moves into execution. You’ll get clear steps and practical assignments.</p>
                            </details>

                            <details class="bg-[#111] border border-gold/40 rounded-2xl p-6">
                                <summary class="cursor-pointer text-white font-bold">How long do the courses take?</summary>
                                <p class="mt-3 text-gray-300 text-sm">Most people can complete a course in 2–6 weeks depending on your weekly hours. The goal is consistent progress, not rushing.</p>
                            </details>

                            <details class="bg-[#111] border border-gold/40 rounded-2xl p-6">
                                <summary class="cursor-pointer text-white font-bold">Do I need money to start?</summary>
                                <p class="mt-3 text-gray-300 text-sm">Some tracks can be started with minimal budget. Others benefit from tools or software. Use the Profit Estimator to plan and start lean.</p>
                            </details>

                            <details class="bg-[#111] border border-gold/40 rounded-2xl p-6">
                                <summary class="cursor-pointer text-white font-bold">Will this guarantee results?</summary>
                                <p class="mt-3 text-gray-300 text-sm">No. Results depend on effort, execution, experience, and market conditions. The courses provide frameworks and tactics, not promises.</p>
                            </details>

                            <details class="bg-[#111] border border-gold/40 rounded-2xl p-6">
                                <summary class="cursor-pointer text-white font-bold">Can I take multiple courses?</summary>
                                <p class="mt-3 text-gray-300 text-sm">Yes. Many people combine skills (e.g., sales + service, or AI + operations). The Track Finder helps you pick a starting point.</p>
                            </details>

                            <details class="bg-[#111] border border-gold/40 rounded-2xl p-6">
                                <summary class="cursor-pointer text-white font-bold">Is the trading content financial advice?</summary>
                                <p class="mt-3 text-gray-300 text-sm">No. It is educational content only. You are responsible for your decisions. Always use risk management and consider professional advice where appropriate.</p>
                            </details>
                        </div>
                    </div>
                </section>
            `;

            // E6. Contact (Simple Message)
            const contactSection = `
                <section id="contact" class="py-16 lg:py-24 bg-black border-t border-gold/30">
                    <div class="container mx-auto px-4 max-w-5xl">
                        <div class="text-center mb-10">
                            <h3 class="text-4xl sm:text-5xl text-gold headline-font">Contact</h3>
                            <p class="mt-4 text-gray-300 text-lg max-w-3xl mx-auto">
                                Have a question or need help navigating the site? Send a message and we’ll route it to the right place. <span class="text-gray-200">You can also email us directly at</span> <a class="text-gold font-semibold hover:underline break-all" href="mailto:theworkworlduniversity@gmail.com">theworkworlduniversity@gmail.com</a>.</p>
                        </div>

                        <div class="bg-[#111] border border-gold/40 rounded-2xl p-6 sm:p-8">
                            <form id="contactForm" class="grid md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-xs font-bold uppercase tracking-widest text-gray-400 mb-2">Name</label>
                                    <input id="cf_name" type="text" placeholder="Your name"
                                        class="w-full bg-black border border-gold/30 rounded-md px-4 py-3 text-white" />
                                </div>
                                <div>
                                    <label class="block text-xs font-bold uppercase tracking-widest text-gray-400 mb-2">Email</label>
                                    <input id="cf_email" type="email" placeholder="you@example.com"
                                        class="w-full bg-black border border-gold/30 rounded-md px-4 py-3 text-white" />
                                </div>
                                <div class="md:col-span-2">
                                    <label class="block text-xs font-bold uppercase tracking-widest text-gray-400 mb-2">Message</label>
                                    <textarea id="cf_message" rows="5" placeholder="How can we help?"
                                        class="w-full bg-black border border-gold/30 rounded-md px-4 py-3 text-white"></textarea>
                                    <p class="mt-2 text-xs text-gray-400">
                                        This form opens your email client to send a message to support. No data is stored on this page.
                                    </p>
                                </div>
                                <div class="md:col-span-2 flex flex-col sm:flex-row items-center gap-3">
                                    <button type="submit" class="bg-gold text-black px-6 py-3 rounded-md font-bold uppercase text-xs btn-hover-gold transition duration-300">
                                        Send Message
                                    </button>
                                    <a href="mailto:theworkworlduniversity@gmail.com" class="text-xs text-gray-300 hover:text-gold transition duration-200">
                                        Or email theworkworlduniversity@gmail.com
                                    </a>
                                </div>
                            </form>
                        </div>
                    </div>
                </section>
            `;

            // F. Final CTA 

            const finalCta = `
                <section class="bg-gold py-16 text-center mt-12">
                    <div class="container mx-auto px-4 max-w-5xl">
                        <h3 class="text-4xl sm:text-5xl headline-font text-black mb-4">
                            READY TO START?
                        </h3>
                        <p class="text-black text-lg mb-8 font-semibold">
                            Choose a course, follow the lessons, and apply the framework in your day-to-day work. Progress comes from consistent implementation.
                        </p>
                        <button type="button" data-nav="courses" class="px-10 py-4 bg-black text-gold text-xl font-extrabold uppercase rounded-lg shadow-2xl shadow-black/50 transition duration-300 hover:bg-gray-800">
                            Browse Courses
                        </button>
                    </div>
                </section>
            `;

            return hero + missionSection + corruptionSection + coursePreviews + profitEstimator + trackFinder + resourceLibrary + faqSection + contactSection + finalCta;
        }

        function renderCoursesPage() {
            return `
                <section class="py-16 lg:py-24 container mx-auto px-4 max-w-7xl flex-grow">
                    <h2 class="text-5xl sm:text-6xl text-gold headline-font mb-12 text-center border-b border-gold/50 pb-4">
                        COURSE LIBRARY. 4 COURSES BUILT FOR EXECUTION.
                    </h2>
                    
                    <div class="grid md:grid-cols-2 gap-10">
                        ${COURSES.map(course => `
                            <div class="p-8 bg-[#111] rounded-xl shadow-2xl border border-gold/70 flex flex-col justify-between">
                                <div>
                                    <h3 class="text-3xl font-extrabold text-gold mb-3">${course.title.toUpperCase()}</h3>
                                    
                                    <div class="mb-6">

                                        <p class="text-gray-400 text-sm italic">${course.bio}</p>
                                    </div>

                                    <p class="text-white text-lg mb-4 leading-relaxed">${course.shortDesc}</p>
                                    <p class="text-gray-300 text-sm mb-6">Startup cost: ${getStartupCostDisplay(course.id)}</p>
                                </div>
                                
                                <a 
                                    href="#lesson?course=${course.id}&lesson=lesson1"
                                    data-action="open-course"
                                    data-course="${course.id}"
                                    class="mt-4 inline-flex items-center justify-center px-8 py-3 bg-gold text-black text-lg font-extrabold uppercase rounded-md shadow-lg transition duration-300 btn-hover-gold"
                                >
                                    View Lessons &rarr;
                                </a>
                                <button
                                    type="button"
                                    data-action="enroll"
                                    data-course="${course.id}"
                                    class="mt-3 w-full px-8 py-2 bg-black text-gold text-sm font-bold uppercase rounded-md border border-gold/50 hover:bg-[#111] transition duration-300"
                                >
                                    Enroll / Unlock (\$${course.price})
                                </button>
                                <p class="text-xs text-gray-500 mt-2">Tip: log in to unlock the full lessons.</p>
                            </div>
                        `).join('')}
                    </div>
                </section>
            `;
        }

        
        // --- Preview / access gating helpers ---
        function previewHtml(fullHtml, maxChars = 1100) {
            if (!fullHtml) return '';
            const s = String(fullHtml);
            if (s.length <= maxChars) return s;
            const cut = s.slice(0, maxChars);
            // Prefer cutting at the end of a paragraph for clean layout
            const lastP = cut.lastIndexOf('</p>');
            const safeCut = lastP > 200 ? cut.slice(0, lastP + 4) : cut;
            return safeCut + `
                <div class="mt-4 p-4 rounded-2xl border border-zinc-800 bg-zinc-950">
                    <p class="text-sm text-gray-300"><span class="text-white font-semibold">Preview mode.</span> Log in to unlock the full lesson, full path curriculum, and all tools.</p>
                </div>
            `;
        }

        function requireLoginRedirect(page, courseId, lessonId) {
            STATE.postLoginRedirect = { page, courseId: courseId || null, lessonId: lessonId || null };
            navigateTo('login');
        }

        // --- Masterclass Appendix (long-form, embedded in this single file) ---
        function renderMasterclassAppendix(courseId, lessonKey, trackId) {
            // Keep the site stable: generate long content with deterministic templates.
            const courseNameMap = {
                landscaping: 'Landscaping',
                trading: 'Trading/Crypto',
                ai: 'AI Automation',
                sales: 'Sales'
            };
            const trackNameMap = {
                // Landscaping
                mowing: 'Lawn Mowing', cement: 'Concrete & Flatwork', construction: 'Light Construction',
                // Trading
                day: 'Day Trading', scalp: 'Scalping', swing: 'Weekly Swing Trading',
                // AI
                social: 'AI Social Posting', receptionist: 'AI Receptionist', helper: 'AI Helper',
                // Sales
                stock: 'Stock Pitches (Compliance-First)', objects: 'Selling Objects', food: 'Selling Food & Beverages',
                // Other tracks
                core: 'Core', membership: '12-Week Membership'
            };

            const courseLabel = courseNameMap[courseId] || 'Course';
            const trackLabel = trackNameMap[trackId] || 'Track';

            // Preview gating: if the site is in preview mode and user is not logged in, show a short teaser.
            if (!STATE.user) {
                return (
                    '<div class="mt-10 p-6 rounded-2xl border border-gold/30 bg-[#0b0b0b]">' +
                      '<p class="text-gold text-xs font-bold uppercase tracking-widest">Masterclass appendix</p>' +
                      '<h4 class="text-2xl text-white headline-font mt-2">Extended reading and exercises (locked)</h4>' +
                      '<p class="text-gray-300 mt-3 leading-relaxed">' +
                        'This lesson includes a long-form appendix with detailed standards, templates, case scenarios, and practice labs. ' +
                        'Log in to unlock the full appendix for ' + courseLabel + ' — ' + trackLabel + '.' +
                      '</p>' +
                      '<div class="mt-4 p-4 rounded-xl border border-zinc-800 bg-black/50">' +
                        '<p class="text-gray-300 text-sm"><strong class="text-white">Preview:</strong> Professionals use a repeatable structure: inputs → rules → actions → outputs → review. ' +
                        'Your job is to turn this lesson into a process you can run without guessing. In the full appendix you will build: (1) a rules card, (2) a QA checklist, (3) a tracker, and (4) a weekly review routine.</p>' +
                      '</div>' +
                    '</div>'
                );
            }

            // Course-specific vocabulary packs (used to vary and lengthen paragraphs).
            const vocab = {
                landscaping: {
                    nouns: ['route density', 'service menu', 'job checklist', 'job costing', 'upsell ladder', 'review request', 'seasonal package', 'equipment maintenance'],
                    verbs: ['quote', 'schedule', 'execute', 'document', 'inspect', 'follow up', 'standardize', 'upsell'],
                    metrics: ['jobs/week', 'average ticket', 'gross margin', 'fuel cost per job', 'close rate', 'repeat rate', 'review rate', 'minutes per lawn']
                },
                trading: {
                    nouns: ['risk unit (R)', 'position size', 'market regime', 'setup checklist', 'journal entry', 'stop distance', 'execution window', 'review cadence'],
                    verbs: ['plan', 'size', 'enter', 'exit', 'stand aside', 'journal', 'review', 'debrief'],
                    metrics: ['R per trade', 'max daily loss', 'rule adherence', 'average R', 'drawdown', 'win rate', 'trade frequency', 'slippage notes']
                },
                ai: {
                    nouns: ['workflow spec', 'intake form', 'routing rule', 'prompt library', 'error log', 'fallback path', 'QA test case', 'handoff doc'],
                    verbs: ['design', 'build', 'route', 'log', 'monitor', 'escalate', 'document', 'iterate'],
                    metrics: ['response time', 'failure rate', 'handoff rate', 'time saved', 'ticket resolution', 'accuracy checks', 'SLA compliance', 'weekly maintenance time']
                },
                sales: {
                    nouns: ['offer sheet', 'lead list', 'qualification questions', 'follow-up sequence', 'pipeline stage', 'objection handling', 'closing script', 'retention play'],
                    verbs: ['prospect', 'qualify', 'follow up', 'pitch', 'negotiate', 'close', 'deliver', 'retain'],
                    metrics: ['messages/day', 'reply rate', 'call rate', 'close rate', 'AOV', 'CAC estimate', 'follow-up touches', 'refund rate']
                }
            };

            const pack = vocab[courseId] || vocab.sales;

            const seed = (function(){
                try {
                    const s = String(lessonKey || '');
                    const n = parseInt(s.replace(/[^0-9]/g,''), 10);
                    return isNaN(n) ? 0 : n;
                } catch(e) { return 0; }
            })();

            function pick(arr, i) { return arr[(i + seed) % arr.length]; }

            // Generate ~40 sections * ~260-320 words each (roughly 10k+ words).
            const sectionCount = 40 + (seed % 3);
            let out = '';
            out += '<div class="mt-10 p-6 rounded-2xl border border-gold/30 bg-[#0b0b0b]">';
            out +=   '<p class="text-gold text-xs font-bold uppercase tracking-widest">Masterclass appendix</p>';
            out +=   '<h4 class="text-2xl text-white headline-font mt-2">Extended Professional Reading (10,000+ words)</h4>';
            out +=   '<p class="text-gray-300 mt-3 leading-relaxed">' +
                        'This appendix is intentionally long. It is designed to slow you down, deepen comprehension, and convert the lesson into a repeatable skill. ' +
                        'Course: <strong>' + courseLabel + '</strong> • Track: <strong>' + trackLabel + '</strong> • Lesson: <strong>' + lessonKey + '</strong>.' +
                    '</p>';

            if (courseId === 'trading') {
                out += '<div class="mt-4 p-4 rounded-xl border border-zinc-800 bg-black/50">' +
                         '<p class="text-gray-300 text-sm"><strong class="text-white">Trading disclaimer:</strong> Educational content only. Not financial advice. Trading involves risk of loss, including total loss. No guarantees.</p>' +
                       '</div>';
            }
            if (courseId === 'sales' && trackId === 'stock') {
                out += '<div class="mt-4 p-4 rounded-xl border border-zinc-800 bg-black/50">' +
                         '<p class="text-gray-300 text-sm"><strong class="text-white">Compliance-first note:</strong> Use disclosure, avoid promises, and follow all applicable laws and policies.</p>' +
                       '</div>';
            }

            out += '<div class="mt-6 p-5 rounded-2xl border border-zinc-800 bg-zinc-950">' +
                     '<p class="text-white font-semibold mb-2">How to use this appendix</p>' +
                     '<ul class="list-disc ml-6 space-y-2 text-gray-300 text-sm">' +
                       '<li>Read one section at a time, then pause to write the deliverable note listed at the bottom of that section.</li>' +
                       '<li>Do not “collect” information. Convert each section into an artifact: a checklist, a template, a rules card, or a logged rep.</li>' +
                       '<li>Track one metric per week. Professionals improve one variable at a time.</li>' +
                     '</ul>' +
                   '</div>';

            for (let i = 0; i < sectionCount; i++) {
                const n1 = pick(pack.nouns, i);
                const n2 = pick(pack.nouns, i + 3);
                const v1 = pick(pack.verbs, i + 1);
                const v2 = pick(pack.verbs, i + 4);
                const m1 = pick(pack.metrics, i + 2);
                const m2 = pick(pack.metrics, i + 6);

                const title = 'Section ' + (i + 1) + ' — ' + n1.toUpperCase() + ' IN PRACTICE';
                out += '<div class="mt-6 p-5 rounded-2xl border border-zinc-800 bg-black/50">';
                out +=   '<p class="text-white font-semibold mb-2">' + title + '</p>';

                // Build 3 paragraphs (each ~90-120 words) + bullets + deliverable line
                out +=   '<p class="text-gray-300 text-sm leading-relaxed">' +
                           'A professional treats ' + n1 + ' as a system, not a one-off task. The difference is documentation: you ' + v1 + ' the same way every time, ' +
                           'using the same inputs and the same decision rules. If a step is unclear, you rewrite it until it becomes measurable. ' +
                           'When you ' + v2 + ', you should be able to explain the “why” in a single sentence and point to the rule you followed. ' +
                           'This is how you avoid improvisation under pressure and keep outcomes consistent even when the scenario changes.' +
                         '</p>';

                out +=   '<p class="text-gray-300 text-sm leading-relaxed mt-3">' +
                           'Start by identifying the minimum inputs required to act. Then define the failure modes: what breaks first, what causes rework, and what creates customer friction or execution errors. ' +
                           'Next, write a short rules card: “If X, then Y.” Your rules should directly control risk and quality. ' +
                           'Finally, choose a metric. If you do not measure, you cannot improve. For this section, track <strong>' + m1 + '</strong> and annotate it with context notes. ' +
                           'Over time, your log will reveal where your process leaks time, quality, or profit.' +
                         '</p>';

                out +=   '<p class="text-gray-300 text-sm leading-relaxed mt-3">' +
                           'Once your baseline is set, run repetitions. Do not change everything at once. Adjust a single variable, then re-run the same process so your data stays clean. ' +
                           'If results improve, lock the change into the checklist and version your template. If results worsen, revert and write down the lesson learned. ' +
                           'Professionals earn speed after they earn consistency. Your short-term goal is repeatability; your long-term goal is predictable performance.' +
                         '</p>';

                out +=   '<div class="mt-4 p-4 rounded-xl border border-zinc-800 bg-zinc-950">' +
                           '<p class="text-gray-200 text-sm font-semibold mb-2">Action checklist</p>' +
                           '<ul class="list-disc ml-6 space-y-2 text-gray-300 text-sm">' +
                             '<li>Write the 5 inputs you must have before you ' + v1 + '.</li>' +
                             '<li>Create 5 rules (“If X, then Y”) that control quality and risk.</li>' +
                             '<li>Run 3 reps and log time, mistakes, and the outcome.</li>' +
                             '<li>Choose one metric: <strong>' + m2 + '</strong>, and track it weekly.</li>' +
                           '</ul>' +
                         '</div>';

                out +=   '<p class="text-gray-400 text-sm mt-4"><strong class="text-white">Deliverable:</strong> Add one page to your workbook titled “' + n1 + '” with inputs, rules, checklist, and your first 3 logged reps.</p>';
                out += '</div>';
            }

            out += '<div class="mt-6 p-5 rounded-2xl border border-zinc-800 bg-zinc-950">' +
                     '<p class="text-white font-semibold mb-2">Close-out standard</p>' +
                     '<ul class="list-disc ml-6 space-y-2 text-gray-300 text-sm">' +
                       '<li>You have at least one reusable template saved as v1.</li>' +
                       '<li>You ran at least 3 reps and logged them.</li>' +
                       '<li>You created a rules card and a QA checklist.</li>' +
                       '<li>You posted a summary in Discord and asked for one targeted critique.</li>' +
                     '</ul>' +
                     '<div class="mt-4 flex flex-wrap gap-3">' +
                       '<a href="https://discord.gg/9GPtCBr7" target="_blank" rel="noopener noreferrer" class="btn-gold px-5 py-2 rounded-lg font-semibold">Ask for feedback in Discord</a>' +
                       '<a href="mailto:theworkworlduniversity@gmail.com" class="px-5 py-2 rounded-lg font-semibold border border-gold/40 text-white hover:bg-gold/10 transition">Email support</a>' +
                     '</div>' +
                   '</div>';

            out += '</div>';
            return out;
        }

function renderLessonPage() {
    const courseId = STATE.selectedCourse;
    const course = COURSES.find(c => c.id === courseId);
    const titles = LESSON_TITLES[courseId] || buildLessonTitles(course?.title || "Course");
    const lessonKeys = Object.keys(titles).filter(k => /^lesson\d+$/.test(k)).sort((a,b)=>parseInt(a.slice(6))-parseInt(b.slice(6)));
    const currentLesson = lessonKeys.includes(STATE.currentLesson) ? STATE.currentLesson : (lessonKeys[0] || 'lesson1');

    const entitled = hasEntitlement(courseId);

    const leftNav = `
        <div class="p-5 bg-[#0b0b0b] rounded-xl border border-gold/30">
            <p class="text-gold text-xs font-bold uppercase tracking-widest">Lessons</p>
            <div class="mt-4 space-y-2">
                ${lessonKeys.map(k => `
                    <a href="#lesson?course=${courseId}&lesson=${k}"
                       class="block px-4 py-3 rounded-lg border ${k===currentLesson ? 'border-gold bg-[#111]' : 'border-gold/20 bg-black hover:bg-[#111]'}">
                        <div class="text-white font-semibold">${titles[k]}</div>
                        <div class="text-xs text-gray-500 mt-1">${entitled ? 'Unlocked' : 'Locked'}</div>
                    </a>
                `).join('')}
            </div>
        </div>
    `;

    let contentHtml = '';
    if (!STATE.user) {
        const preview = (LESSON_PREVIEWS[courseId] && LESSON_PREVIEWS[courseId][currentLesson]) || (LESSON_PREVIEWS[courseId] && LESSON_PREVIEWS[courseId].lesson1) || SECURE_LESSON_DEFAULT;
        contentHtml = `
            <div class="p-6 bg-[#111] rounded-xl border border-gold/40">
                <h2 class="text-3xl text-white headline-font mb-2">Sign in required</h2>
                <p class="text-gray-300 mb-6">To access the full lessons, you must sign in. Purchases will be verified and attached to your account.</p>
                <button type="button" data-action="require-login" data-course="${courseId}" data-lesson="${currentLesson}"
                    class="px-6 py-3 bg-gold text-black font-extrabold uppercase rounded-md btn-hover-gold">Sign in</button>
            </div>
            <div class="mt-8 p-6 bg-black rounded-xl border border-gold/20">
                ${preview}
            </div>
        `;
    } else if (!entitled) {
        const preview = (LESSON_PREVIEWS[courseId] && LESSON_PREVIEWS[courseId][currentLesson]) || (LESSON_PREVIEWS[courseId] && LESSON_PREVIEWS[courseId].lesson1) || SECURE_LESSON_DEFAULT;
        contentHtml = `
            <div class="p-6 bg-[#111] rounded-xl border border-gold/40">
                <h2 class="text-3xl text-white headline-font mb-2">Lesson locked</h2>
                <p class="text-gray-300 mb-4">This course unlocks after purchase. When Gumroad products are live, you’ll buy, verify, and your access will be stored in Supabase.</p>
                <button type="button" data-action="open-paywall" data-course="${courseId}" data-lesson="${currentLesson}"
                    class="px-6 py-3 bg-gold text-black font-extrabold uppercase rounded-md btn-hover-gold">Unlock course</button>
                <p class="text-xs text-gray-500 mt-3">Tip: Until Gumroad is live, you can manually grant yourself access via the Supabase entitlements table.</p>
            </div>
            <div class="mt-8 p-6 bg-black rounded-xl border border-gold/20">
                ${preview}
            </div>
        `;
    } else {
        contentHtml = `
            <div class="p-6 bg-[#111] rounded-xl border border-gold/40">
                <div class="flex items-center justify-between gap-4">
                    <div>
                        <h2 class="text-3xl text-white headline-font mb-1">${titles[currentLesson] || currentLesson}</h2>
                        <p class="text-gray-400 text-sm">Unlocked • Delivered securely from Supabase</p>
                    </div>
                    <button type="button" data-action="open-paywall" data-course="${courseId}" data-lesson="${currentLesson}"
                        class="px-4 py-2 bg-black text-gold text-xs font-bold uppercase rounded-md border border-gold/40 hover:bg-[#111] transition">Restore access</button>
                </div>
                <div id="lessonContentContainer" class="mt-6">
                    <div class="text-gray-300">Loading lesson…</div>
                </div>
            </div>
        `;
    }

    return `
        <section class="py-12 lg:py-16 container mx-auto px-4 max-w-7xl">
            <div class="mb-8 p-6 bg-[#111] rounded-xl border border-gold/50">
                <h1 class="text-4xl text-white headline-font mb-2">${(course?.title || 'Course').toUpperCase()}</h1>
                <p class="text-gray-400 text-sm mt-1 italic">${course?.bio || ''}</p>
            </div>

            <div class="grid lg:grid-cols-[360px,1fr] gap-8">
                ${leftNav}
                <div>
                    ${contentHtml}
                </div>
            </div>
        </section>
    `;
}

        

        function formatUSD(value) {
            const n = Number.isFinite(value) ? value : 0;
            return '$' + Math.round(n).toLocaleString('en-US');
        }

        function peInput(label, id, defaultVal, suffix) {
            const suf = suffix ? `<span class=\"text-gray-500 text-sm\">${suffix}</span>` : '';
            return `
                <div>
                    <label class=\"block text-xs uppercase tracking-widest text-gray-400 mb-2\">${label}</label>
                    <div class=\"flex items-center gap-3\">
                        <input id=\"${id}\" type=\"number\" step=\"any\" value=\"${defaultVal}\" class=\"w-full bg-black border border-gold/30 rounded-md px-4 py-3 text-white\" />
                        ${suf}
                    </div>
                </div>
            `;
        }

        function renderProfitEstimatorInputs(track) {
            if (track === 'landscaping') {
                return [
                    peInput('Jobs per week', 'pe_jobs_per_week', 6, ''),
                    peInput('Average price per job', 'pe_avg_price', 250, 'USD'),
                    peInput('Direct cost per job (labor, fuel, materials)', 'pe_cost_per_job', 110, 'USD'),
                    peInput('Monthly overhead (insurance, tools, truck payment, etc.)', 'pe_overhead', 800, 'USD'),
                ].join('');
            }
            if (track === 'trading') {
                return [
                    peInput('Starting capital', 'pe_start_capital', 2000, 'USD'),
                    peInput('Monthly return (percent)', 'pe_monthly_return', 5, '%'),
                    peInput('Monthly contribution (optional)', 'pe_monthly_contrib', 0, 'USD'),
                    peInput('Months to model', 'pe_months', 12, 'months'),
                ].join('');
            }
            if (track === 'ai') {
                return [
                    peInput('Client projects per month', 'pe_projects_per_month', 2, ''),
                    peInput('Average fee per project', 'pe_project_fee', 800, 'USD'),
                    peInput('Direct cost per project (tools, subcontracting)', 'pe_ai_cost', 120, 'USD'),
                    peInput('Monthly overhead (software, marketing, etc.)', 'pe_ai_overhead', 200, 'USD'),
                ].join('');
            }
            // sales
            return [
                peInput('Qualified calls per month', 'pe_calls', 40, ''),
                peInput('Close rate (percent)', 'pe_close_rate', 15, '%'),
                peInput('Average deal size', 'pe_deal_size', 3000, 'USD'),
                peInput('Commission rate (percent)', 'pe_commission', 10, '%'),
            ].join('');
        }

        function calculateProfitEstimator(track) {
            const weeksPerMonth = 4.33;

            const startupRange = (() => {
                if (track === 'landscaping') return { low: 1000, high: 20000, display: '$1,000–$20,000' };
                if (track === 'trading') return { low: 1000, high: 1000, display: '$1,000' };
                if (track === 'ai') return { low: 100, high: 100, display: '$100' };
                if (track === 'sales') return { low: 500, high: 500, display: '$500' };
                return { low: 0, high: 0, display: 'Varies' };
            })();

            const breakevenLabel = (monthlyProfit) => {
                if (!Number.isFinite(monthlyProfit) || monthlyProfit <= 0) return '—';
                const lowMonths = startupRange.low > 0 ? (startupRange.low / monthlyProfit) : 0;
                const highMonths = startupRange.high > 0 ? (startupRange.high / monthlyProfit) : 0;
                const fmt = (n) => (n >= 100 ? Math.round(n) : Math.round(n * 10) / 10);
                if (startupRange.low === startupRange.high) return `${fmt(lowMonths)}`;
                return `${fmt(lowMonths)}–${fmt(highMonths)}`;
            };


            if (track === 'landscaping') {
                const jobsPerWeek = parseFloat(document.getElementById('pe_jobs_per_week')?.value || '0');
                const avgPrice = parseFloat(document.getElementById('pe_avg_price')?.value || '0');
                const costPerJob = parseFloat(document.getElementById('pe_cost_per_job')?.value || '0');
                const overhead = parseFloat(document.getElementById('pe_overhead')?.value || '0');

                const monthlyRevenue = jobsPerWeek * weeksPerMonth * avgPrice;
                const monthlyCOGS = jobsPerWeek * weeksPerMonth * costPerJob;
                const monthlyProfit = monthlyRevenue - monthlyCOGS - overhead;

                return {
                    monthly: monthlyProfit,
                    annual: monthlyProfit * 12,
                    startup: startupRange.display,
                    breakeven: breakevenLabel(monthlyProfit),
                    notes: `Revenue assumes ${jobsPerWeek} jobs/week at ${formatUSD(avgPrice)} each. Costs include direct cost per job and monthly overhead.`
                };
            }

            if (track === 'trading') {
                const start = parseFloat(document.getElementById('pe_start_capital')?.value || '0');
                const rPct = parseFloat(document.getElementById('pe_monthly_return')?.value || '0');
                const contrib = parseFloat(document.getElementById('pe_monthly_contrib')?.value || '0');
                const months = maxInt(document.getElementById('pe_months')?.value, 12);

                const r = rPct / 100.0;
                let endBalance = start;
                for (let i = 0; i < months; i++) {
                    endBalance = endBalance * (1 + r) + contrib;
                }
                const totalContrib = contrib * months;
                const profit = endBalance - start - totalContrib;
                const monthlyProfit = months > 0 ? profit / months : 0;

                return {
                    monthly: monthlyProfit,
                    annual: monthlyProfit * 12,
                    startup: startupRange.display,
                    breakeven: breakevenLabel(monthlyProfit),
                    notes: `Modeled ${months} months at ${rPct}% per month with ${formatUSD(contrib)} monthly contributions. Trading involves significant risk; outcomes vary.`
                };
            }

            if (track === 'ai') {
                const projects = parseFloat(document.getElementById('pe_projects_per_month')?.value || '0');
                const fee = parseFloat(document.getElementById('pe_project_fee')?.value || '0');
                const cost = parseFloat(document.getElementById('pe_ai_cost')?.value || '0');
                const overhead = parseFloat(document.getElementById('pe_ai_overhead')?.value || '0');

                const monthlyRevenue = projects * fee;
                const monthlyCOGS = projects * cost;
                const monthlyProfit = monthlyRevenue - monthlyCOGS - overhead;

                return {
                    monthly: monthlyProfit,
                    annual: monthlyProfit * 12,
                    startup: startupRange.display,
                    breakeven: breakevenLabel(monthlyProfit),
                    notes: `Assumes ${projects} projects/month at ${formatUSD(fee)} each. Update costs and overhead to match your tools and delivery model.`
                };
            }

            // sales
            const calls = parseFloat(document.getElementById('pe_calls')?.value || '0');
            const closeRatePct = parseFloat(document.getElementById('pe_close_rate')?.value || '0');
            const dealSize = parseFloat(document.getElementById('pe_deal_size')?.value || '0');
            const commissionPct = parseFloat(document.getElementById('pe_commission')?.value || '0');

            const deals = calls * (closeRatePct / 100.0);
            const grossCommission = deals * dealSize * (commissionPct / 100.0);

            return {
                monthly: grossCommission,
                annual: grossCommission * 12,
                startup: startupRange.display,
                breakeven: breakevenLabel(grossCommission),
                notes: `Based on ${calls} qualified calls/month, ${closeRatePct}% close rate, ${formatUSD(dealSize)} average deal, and ${commissionPct}% commission.`
            };
        }

        function maxInt(value, fallback) {
            const n = parseInt(value, 10);
            return Number.isFinite(n) && n > 0 ? n : fallback;
        }

        function initProfitEstimator() {
            const trackSel = document.getElementById('pe_track');
            const inputs = document.getElementById('pe_inputs');
            const btn = document.getElementById('pe_calc_btn');
            const outMonthly = document.getElementById('pe_monthly');
            const outAnnual = document.getElementById('pe_annual');
            const outStartup = document.getElementById('pe_startup');
            const outBreakeven = document.getElementById('pe_breakeven');
            const outNotes = document.getElementById('pe_notes');

            if (!trackSel || !inputs || !btn || !outMonthly || !outAnnual || !outStartup || !outBreakeven || !outNotes) return;

            const refreshInputs = () => {
                const track = trackSel.value;
                inputs.innerHTML = renderProfitEstimatorInputs(track);
                // reset outputs
                outMonthly.textContent = '$0';
                outAnnual.textContent = '$0';
                outStartup.textContent = '$0';
                outBreakeven.textContent = '—';
                outNotes.textContent = 'Set your assumptions on the left, then calculate.';
            };

            trackSel.onchange = refreshInputs;
            refreshInputs();

            btn.onclick = () => {
                const track = trackSel.value;
                const res = calculateProfitEstimator(track);
                outMonthly.textContent = formatUSD(res.monthly);
                outAnnual.textContent = formatUSD(res.annual);
                outStartup.textContent = res.startup || '$0';
                outBreakeven.textContent = res.breakeven || '—';
                outNotes.textContent = res.notes;
            };
        }

        // Download helper (creates a local file)
        function downloadTextFile(filename, content) {
            try {
                const blob = new Blob([content], { type: 'text/plain;charset=utf-8' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = filename;
                document.body.appendChild(a);
                a.click();
                a.remove();
                setTimeout(() => URL.revokeObjectURL(url), 250);
            } catch (e) {
                showMessage('Download failed. Please try again.');
            }
        }

        function initResourceDownloads() {
            const buttons = document.querySelectorAll('[data-download]');
            if (!buttons || buttons.length === 0) return;

            const templates = {
                'landscaping-bid-template.txt': 
`LANDSCAPING BID & SCOPE TEMPLATE (STARTER)
Client:
Address:
Date:

1) Scope of Work
- Work area(s):
- Tasks included:
- Materials included / excluded:

2) Schedule
- Proposed start:
- Estimated duration:
- Weather contingency:

3) Price
- Labor:
- Materials:
- Disposal:
- Total:

4) Payment Terms
- Deposit:
- Balance due:
- Accepted methods:

5) Notes / Change Orders
- Any changes to scope must be approved in writing.
- Additional work will be priced separately.

Signature (Client):
Signature (Provider):`,

                'sales-followup-scripts.txt':
`FOLLOW-UP SCRIPTS (STARTER)
1) Quick Check-In
"Hey [Name] — quick check-in. Still looking to solve [problem]? If not, no worries."

2) Value Add
"Hey [Name] — sharing this because it’s relevant: [1-sentence insight]. Want me to walk you through it?"

3) Close the Loop
"Hey [Name] — should I close this out for now, or do you want to revisit next week?"

4) Simple Choice
"Do you prefer (A) [option] or (B) [option]? Either works — just want to point you the right direction."

Tip: Keep it short. One question. One next step.`,

                'ai-offer-outline.txt':
`AI SERVICE OFFER OUTLINE (STARTER)
1) Who you help
- Industry / role:
- Typical pain point:

2) The outcome (what changes)
- Save time:
- Reduce errors:
- Increase throughput:
- Improve customer response:

3) What you deliver
- Audit / discovery
- Automation plan
- Setup + documentation
- Training + handoff

4) What you need from the client
- Access / tools
- Data sources
- Approval cadence

5) Timeline
- Week 1:
- Week 2:
- Week 3:

6) Pricing structure
- One-time setup fee
- Optional ongoing support (monthly)

7) Risk management
- Clear scope
- Change-order policy
- Data/privacy considerations`,

                'trading-risk-cheatsheet.txt':
`TRADING RISK & POSITION SIZING (STARTER)
1) Risk per trade
- Start small. Many traders use 0.25%–1% of account risk per trade.

2) Position sizing formula
Position size = (Account * Risk%) / (Stop distance)

Example:
Account = $5,000
Risk% = 0.5% (0.005)
Risk amount = $25
Stop distance = $0.50
Position size = $25 / $0.50 = 50 shares

3) Basic guardrails
- Max daily loss limit
- Avoid revenge trading
- Pre-plan entries/exits
- Use stops (or clear invalidation points)

Reminder: Educational only. You are responsible for your decisions.`
            };

            buttons.forEach(btn => {
                btn.addEventListener('click', () => {
                    const fn = btn.getAttribute('data-download');
                    const content = templates[fn] || 'Template is not available.';
                    downloadTextFile(fn, content);
                    showMessage('Downloaded. Customize it to fit your market.');
                });
            });
        }

        function initTrackFinder() {
            const btn = document.getElementById('tf_btn');
            if (!btn) return;

            const goalEl = document.getElementById('tf_goal');
            const hoursEl = document.getElementById('tf_hours');
            const budgetEl = document.getElementById('tf_budget');

            const out = document.getElementById('tf_output');
            const title = document.getElementById('tf_title');
            const reason = document.getElementById('tf_reason');
            const step1 = document.getElementById('tf_step1');
            const step2 = document.getElementById('tf_step2');
            const step3 = document.getElementById('tf_step3');
            const openBtn = document.getElementById('tf_course_btn');

            const recs = {
                service: {
                    courseId: 'landscaping',
                    label: 'Landscaping & Running a Landscaping Business',
                    reason: (h, b) => `Best if you want a straightforward path to revenue using repeatable operations. Your plan: ${h} hrs/week with ~$${b} budget.`,
                    step1: 'Pick one service, one neighborhood, and one simple offer.',
                    step2: 'Do outreach every day (10–20 contacts) and deliver spotless work.',
                    step3: 'Avoid overcomplicating branding and tools before you have paying customers.'
                },
                trade: {
                    courseId: 'trading',
                    label: 'Stock Market & Cryptocurrency Trading',
                    reason: (h, b) => `Best if you want a skills-based approach and can stay disciplined. Plan: ${h} hrs/week with ~$${b} budget.`,
                    step1: 'Define strict risk limits before placing any trade.',
                    step2: 'Track every trade and focus on process quality, not outcomes.',
                    step3: 'Avoid increasing size after losses or trading without a plan.'
                },
                ai: {
                    courseId: 'ai',
                    label: 'Making AI Work for You',
                    reason: (h, b) => `Best if you prefer leverage and systems. Plan: ${h} hrs/week with ~$${b} budget.`,
                    step1: 'Choose one workflow to automate (admin, outreach, reporting).',
                    step2: 'Ship one practical project and document it as a case-style asset (no claims).',
                    step3: 'Avoid building complex tools without a clear user and problem.'
                },
                sales: {
                    courseId: 'sales',
                    label: 'Selling Anything to Anyone',
                    reason: (h, b) => `Best if you want immediate skill transfer across any industry. Plan: ${h} hrs/week with ~$${b} budget.`,
                    step1: 'Build a short list of leads and a direct, respectful outreach message.',
                    step2: 'Practice objections and follow-up cadence daily for 14 days.',
                    step3: 'Avoid long pitches—ask one clear question and drive to a next step.'
                }
            };

            btn.addEventListener('click', () => {
                const goal = goalEl?.value || 'service';
                const hours = maxInt(hoursEl?.value, 10);
                const budget = Math.max(0, parseInt(budgetEl?.value || '0', 10) || 0);

                const rec = recs[goal] || recs.service;

                title.textContent = rec.label;
                reason.textContent = rec.reason(hours, budget);
                step1.textContent = rec.step1;
                step2.textContent = rec.step2;
                step3.textContent = rec.step3;

                out.classList.remove('hidden');

                if (openBtn) {
                    openBtn.onclick = () => navigateTo('lesson', rec.courseId);
                }
            });
        }

        function initContactForm() {
            const form = document.getElementById('contactForm');
            if (!form) return;

            form.addEventListener('submit', (e) => {
                e.preventDefault();
                const name = (document.getElementById('cf_name')?.value || '').trim();
                const email = (document.getElementById('cf_email')?.value || '').trim();
                const msg = (document.getElementById('cf_message')?.value || '').trim();

                const subject = encodeURIComponent('Site inquiry');
                const body = encodeURIComponent(
                    `Name: ${name}\nEmail: ${email}\n\nMessage:\n${msg}\n`
                );

                window.location.href = `mailto:theworkworlduniversity@gmail.com?subject=${subject}&body=${body}`;
            });
        }

// --- Main Render Loop ---

        
        // Bind navigation links without relying on inline onclick (works even if CSP blocks inline handlers)
        function initLessonFetch() {
            if (STATE.currentPage !== 'lesson') return;
            const courseId = STATE.selectedCourse;
            const lessonId = STATE.currentLesson;
            if (!courseId || !lessonId) return;

            if (!hasEntitlement(courseId)) return;

            const container = document.getElementById('lessonContentContainer');
            if (!container) return;

            // Avoid duplicate loads
            const key = `${courseId}:${lessonId}`;
            if (container.getAttribute('data-loaded') === key) return;
            container.setAttribute('data-loaded', key);

            fetchFullLessonHtml(courseId, lessonId)
                .then((html) => {
                    container.innerHTML = html || '<div class="text-gray-300">No content returned.</div>';
                })
                .catch((err) => {
                    const msg = err?.message || 'Could not load lesson. If you just purchased, try restoring access.';
                    container.innerHTML = `
                        <div class="p-4 bg-black rounded-lg border border-gold/30">
                            <p class="text-white font-bold mb-2">Lesson failed to load</p>
                            <p class="text-gray-300 text-sm">${escapeHtml(msg)}</p>
                        </div>
                    `;
                });
        }


        function wireNavLinks() {
            document.querySelectorAll('[data-nav]').forEach((el) => {
                el.addEventListener('click', (e) => {
                    e.preventDefault();
                    const page = el.getAttribute('data-nav');
                    if (page) navigateTo(page);
                });
            });
        

// Delegated click handling for navigation + cookie consent.
// This avoids relying on inline onclick handlers (often blocked by CSP on some hosts).
document.addEventListener('click', (e) => {
    // Navigation (works even if inline onclick is blocked by CSP)
    const navEl = e.target.closest && e.target.closest('[data-nav]');
    if (navEl) {
        e.preventDefault();
        const page = navEl.getAttribute('data-nav');
        if (STATE.mobileMenuOpen) STATE.mobileMenuOpen = false;
        if (page) navigateTo(page);
        return;
    }

    // Course actions
    const actionEl = e.target.closest && e.target.closest('[data-action]');
    if (actionEl) {
        const action = actionEl.getAttribute('data-action');

        // Close mobile menu when clicking any action inside it
        if (actionEl.hasAttribute('data-closemenu')) {
            STATE.mobileMenuOpen = false;
        }

        if (action === 'toggle-mobile-menu') {
            e.preventDefault();
            STATE.mobileMenuOpen = !STATE.mobileMenuOpen;
            renderApp();
            return;
        }

        if (action === 'signout') {
            e.preventDefault();
            if (STATE.mobileMenuOpen) STATE.mobileMenuOpen = false;
            signOut();
            return;
        }

        if (action === 'open-course') {
            e.preventDefault();
            const courseId = actionEl.getAttribute('data-course');
            navigateTo('lesson', courseId, 'lesson1');
            return;
        }

        if (action === 'enroll') {
            e.preventDefault();
            const courseId = actionEl.getAttribute('data-course');
            openPaywallModal(courseId, 'lesson1');
            return;
        }

        if (action === 'require-login') {
            e.preventDefault();
            const courseId = actionEl.getAttribute('data-course');
            const lessonId = actionEl.getAttribute('data-lesson') || 'lesson1';
            requireLoginRedirect('lesson', courseId, lessonId);
            return;
        }

        if (action === 'open-paywall') {
            e.preventDefault();
            const courseId = actionEl.getAttribute('data-course');
            const lessonId = actionEl.getAttribute('data-lesson') || 'lesson1';
            openPaywallModal(courseId, lessonId);
            return;
        }

        
        if (action === 'verify-license') {
            e.preventDefault();
            const courseId = actionEl.getAttribute('data-course');
            const lessonId = actionEl.getAttribute('data-lesson') || 'lesson1';
            const keyInput = document.getElementById('gumroadLicenseKey');
            const licenseKey = (keyInput?.value || '').trim();

            if (!licenseKey) {
                showMessage('Enter your Gumroad license key first.', 'error');
                return;
            }

            // This is intentionally disabled until you deploy the verify-gumroad Edge Function.
            showMessage('Verification is not enabled yet. Once Gumroad is live, we’ll turn this on.', 'info');
            return;
        }

if (action === 'modal-close') {
            e.preventDefault();
            closeModal();
            return;
        }

        if (action === 'track') {
            e.preventDefault();
            const t = actionEl.getAttribute('data-track');
            updateTrack(t);
            return;
        }

        if (action === 'lesson') {
            e.preventDefault();
            const l = actionEl.getAttribute('data-lesson');
            updateLesson(l);
            return;
        }
    }

    // Cookie consent
    const cookieEl = e.target.closest && e.target.closest('[data-cookie-action]');
    if (cookieEl) {
        e.preventDefault();
        const action = cookieEl.getAttribute('data-cookie-action');
        if (action === 'accept') acceptCookies();
        if (action === 'decline') declineCookies();
        return;
    }
});
}


// --- Header rendering (navigation) ---
function renderHeader() {
    const isAuthed = !!STATE.user;
    const navLinks = [
        { page: 'home', label: 'Home' },
        { page: 'courses', label: 'Courses' },
        { page: 'about', label: 'About' },
    ];

    const legalLinks = [
        { page: 'terms', label: 'Terms' },
        { page: 'privacy', label: 'Privacy' },
        { page: 'cookies', label: 'Cookies' },
        { page: 'refund', label: 'No Refunds' },
        { page: 'disclaimer', label: 'Disclaimer' },
    ];

    const desktopLinks = navLinks.map(l =>
        `<a href="#${l.page}" class="nav-link" data-nav="${l.page}">${l.label}</a>`
    ).join('');

    const legalDesktop = legalLinks.map(l =>
        `<a href="#${l.page}" class="nav-link nav-link-legal" data-nav="${l.page}">${l.label}</a>`
    ).join('');

    const authBlock = isAuthed
        ? `<div class="auth-block">
                <span class="muted small">Signed in</span>
                <button class="btn btn-ghost" data-action="signout">Sign out</button>
           </div>`
        : `<div class="auth-block">
                <a class="btn btn-primary" href="#login" data-nav="login">Login</a>
           </div>`;

    const mobileMenu = `
        <div class="mobile-nav">
          <button class="btn btn-ghost" data-action="toggle-mobile-menu" aria-label="Menu">☰</button>
        </div>
        ${STATE.mobileMenuOpen ? `
          <div class="mobile-menu">
            ${navLinks.map(l => `<a href="#${l.page}" data-nav="${l.page}" data-action="noop" data-closemenu="1">${l.label}</a>`).join('')}
            <div class="mobile-legal">
              ${legalLinks.map(l => `<a href="#${l.page}" data-nav="${l.page}" data-action="noop" data-closemenu="1">${l.label}</a>`).join('')}
            </div>
            <div class="mobile-auth">
              ${isAuthed
                ? `<button class="btn btn-ghost" data-action="signout" data-closemenu="1">Sign out</button>`
                : `<a class="btn btn-primary" href="#login" data-nav="login" data-closemenu="1">Login</a>`
              }
            </div>
          </div>
        ` : ''}
    `;

    return `
      <header class="header">
        <div class="header-inner">
          <a class="brand" href="#home" data-nav="home">
            <span class="brand-title">The Work World</span>
          </a>
          <nav class="nav desktop-nav">
            ${desktopLinks}
            <span class="nav-sep"></span>
            ${legalDesktop}
          </nav>
          ${authBlock}
          ${mobileMenu}
        </div>
      </header>
    `;
}


function renderFooter() {
  const year = new Date().getFullYear();
  return `
    <footer class="footer">
      <div class="footer-inner">
        <div class="footer-left">
          <div class="footer-brand">© ${year} The Work World</div>
          <div class="footer-sub">Educational content only. No guarantees. Not financial, legal, or tax advice.</div>
        </div>
        <nav class="footer-links">
          <a href="#terms" data-nav="terms">Terms</a>
          <a href="#privacy" data-nav="privacy">Privacy</a>
          <a href="#cookies" data-nav="cookies">Cookies</a>
          <a href="#refund" data-nav="refund">No Refunds</a>
          <a href="#disclaimer" data-nav="disclaimer">Disclaimer</a>
        </nav>
      </div>
    </footer>
  `;
}



function renderApp() {
            const app = document.getElementById('app');
            let content = '';

            // Render Header and main content wrapper
            let mainContent = '';
            
            switch (STATE.currentPage) {
                case 'login':
                    mainContent = renderLoginPage();
                    break;
                case 'home':
                    mainContent = renderHomePage();
                    break;
                case 'courses':
                    mainContent = renderCoursesPage();
                    break;
                case 'lesson':
                    mainContent = renderLessonPage();
                    break;
                
                case 'account':
                    mainContent = renderAccountPage();
                    break;
case 'terms':
                    mainContent = renderTermsPage();
                    break;
                case 'privacy':
                    mainContent = renderPrivacyPage();
                    break;
                case 'refund':
                    mainContent = renderRefundPolicyPage();
                    break;
                case 'cookies':
                    mainContent = renderCookiePolicyPage();
                    break;
                case 'disclaimer':
                    mainContent = renderDisclaimerPage();
                    break;
                default:
                    mainContent = renderHomePage();
            }

            app.innerHTML = `
                ${renderHeader()}
                <main class="flex-grow">
                    ${mainContent}
                </main>
                ${renderFooter()}
                <div id="messageBox"></div>
            `;

            // Wire up navigation links (legal pages, etc.)
            wireNavLinks();

            // Initialize the estimator widget when present
            setTimeout(() => {
                initAuthForms();
                 initProfitEstimator();
                initTrackFinder();
                initResourceDownloads();
                initContactForm();
                initLessonFetch();
            }, 0);
        }
            function handleHashRoute() {
                // Supported hash formats:
                //   #home
                //   #courses
                //   #lesson?course=COURSE_ID&lesson=lesson1
                //   #account
                //   #terms / #privacy / #cookies / #refund / #disclaimer
                const raw = (window.location.hash || '').replace(/^#/, '').trim();
                if (!raw) return;

                const [pagePart, queryPart] = raw.split('?');
                const page = (pagePart || '').trim();
                const allowed = new Set(['home','courses','lesson','login','account','terms','privacy','cookies','refund','disclaimer']);
                if (!allowed.has(page)) return;

                if (ROUTE_FROM_HASH) return; // prevent loops

                let courseId = null;
                let lessonId = 'lesson1';

                if (page === 'lesson' && queryPart) {
                    const params = new URLSearchParams(queryPart);
                    courseId = params.get('course');
                    lessonId = params.get('lesson') || 'lesson1';
                }

                navigateTo(page, courseId, lessonId, true);
            }
            window.addEventListener('hashchange', handleHashRoute);


        // Initialize App
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                // Defensive boot: never leave a blank screen
                if (!window.supabase || !window.supabase.createClient) {
                    throw new Error("Supabase JS failed to load. If you are using a strict Content Security Policy, allow https://cdn.jsdelivr.net and https://cdn.tailwindcss.com.");
                }
                await loadAuthOnStartup();
                handleHashRoute();
                STATE.cookieConsent = getCookieConsent();
                // Keep public pages accessible. Require login only for account and for unlocking paid lessons.
                if (!STATE.user && STATE.currentPage === 'account') {
                    STATE.currentPage = 'login';
                }
                refreshPaidStatus(STATE.selectedCourse);
                renderApp();
            } catch (err) {
                // Render a visible error so you know what broke
                const box = document.getElementById('bootError');
                if (box) {
                    box.classList.remove('hidden');
                    box.textContent = "Startup error: " + (err?.message || String(err));
                }
                // Try to render at least the shell
                try { renderApp(); } catch (_) {}
                console.error(err);
            }
        });
    
</script>

</body>
</html>